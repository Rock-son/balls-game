(this.webpackJsonpballs=this.webpackJsonpballs||[]).push([[0],{32:function(t,e,a){t.exports=a(64)},37:function(t,e,a){},38:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},50:function(t,e,a){},60:function(t,e,a){},62:function(t,e,a){},63:function(t,e,a){},64:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a.n(n),s=a(13),o=a.n(s),l=(a(37),a(38),a(31)),r=a(16),c=a(17),u=a(6),m=a(18),h=a(19),d=a(21),g=function(t,e,a,n){t.x+t.radius>(window.innerWidth<t.reactContext.canvasWidth?t.reactContext.canvasWidth:window.innerWidth)&&(t.velocity.x=-t.velocity.x),t.x-t.radius<0&&(t.velocity.x=-t.velocity.x),t.y+t.radius>(window.innerHeight<t.reactContext.canvasHeight?t.reactContext.canvasHeight:window.innerHeight)&&(t.velocity.y=-t.velocity.y),t.y-t.radius<0&&(t.velocity.y=-t.velocity.y),t.reactContext.state.simulationSettings.deactivateAfter>0&&t.contagiousFrom&&t.reactContext.state.currentTime-t.contagiousFrom>t.reactContext.state.simulationSettings.deactivateAfter&&(t.contagion=0,t.contagiousFrom=0,t.texture=n.resources.sheet15.textures["ball-white-15.png"],t.reactContext.setState((function(t){return{contagious:t.contagious-1,healthy:t.healthy+1}})));for(var i=0;i<e.length;i++)if(t.myID!==e[i].myID&&a(t.x,t.y,e[i].x,e[i].y)-2*t.radius<0){var s=e[i];s.contagion&&!t.contagion?(t.reactContext.setState((function(t){return{contagious:t.contagious+1,healthy:t.healthy-1}})),t.contagion=1,t.contagiousFrom=(new Date).getTime(),t.texture=n.resources.sheet15.textures["ball-red-15.png"],t.reactContext.state.simulationSettings.autorestart&&0===t.reactContext.state.healthy&&t.reactContext.simulationRestart()):t.contagion&&!s.contagion&&(t.reactContext.setState((function(t){return{contagious:t.contagious+1,healthy:t.healthy-1}})),s.contagion=1,s.contagiousFrom=(new Date).getTime(),s.texture=n.resources.sheet15.textures["ball-red-15.png"],t.reactContext.state.simulationSettings.autorestart&&0===t.reactContext.state.healthy&&t.reactContext.simulationRestart()),v(t,s)}t.x+=t.velocity.x,t.y+=t.velocity.y};function p(t,e){return{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}}function v(t,e){var a=t.velocity.x-e.velocity.x,n=t.velocity.y-e.velocity.y;if(a*(e.x-t.x)+n*(e.y-t.y)>=0){var i=-Math.atan2(e.y-t.y,e.x-t.x),s=p(t.velocity,i),o=p(e.velocity,i),l={x:o.x,y:s.y},r={x:s.x,y:o.y},c=p(l,-i),u=p(r,-i),m=y(t,c),h=y(e,u);t.velocity.x=m.x,t.velocity.y=m.y,e.velocity.x=h.x,e.velocity.y=h.y}}function y(t,e){var a=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));return{x:e.x*t.startSpeed/a,y:e.y*t.startSpeed/a}}var b=a(20);function f(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.autostart=t||!1;var n=this.canvasRef.current;this.simulationApp=new b.a({backgroundColor:0,view:n,width:this.canvasWidth,height:this.canvasHeight,resolution:window.devicePixelRatio||1,autoDensity:!0,sharedLoader:!0}),null==this.simulationApp.loader.resources.sheet15?this.simulationApp.loader.add("sheet15","balls-15.json").on("progress",(function(t,e){return console.log(t.progress+"% loaded")})).on("load",(function(t,e){return console.log("Asset loaded"+e.name)})).on("error",(function(t){return console.error("load error",t)})).load(w.bind(this,a)):this.simulationApp.loader.load(w.bind(this,a));var i=function(t){e.simulationApp.renderer.resize(window.innerWidth<e.canvasWidth?e.canvasWidth:window.innerWidth,window.innerHeight<e.canvasHeight?e.canvasHeight:window.innerHeight)};window.addEventListener("resize",i)}function E(t,e){return Math.floor(Math.random()*(e-t+1))+t}function S(t,e,a,n){var i=a-t,s=n-e;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}function w(t){for(var e,a,n=null==t?this.state.simulationSettings:t,i=n.size,s=n.speed,o=[],l=+n.quantity,r=this.canvasWidth-2.5*i,c=this.canvasHeight-2.5*i,u=this.simulationApp.loader.resources.sheet15.textures["ball-white-15.png"],m=this.simulationApp.loader.resources.sheet15.textures["ball-red-15.png"],h=0;h<l;h++){e=0===h?1:0;var d=E(2*i,r),p=E(2*i,c);if(0!==h)for(var v=0;v<o.length;v++)S(d,p,o[v].x,o[v].y)-(i+o[v].radius)<0&&(d=E(2*i,r),p=E(2*i,c),v=-1);(a=e?new b.b(m):new b.b(u)).x=d,a.y=p,a.width=2*i,a.height=2*i,a.anchor.x=.5,a.anchor.y=.5,a.myID=h,a.radius=i,a.reactContext=this,a.contagion=e,a.contagiousFrom=0,a.velocity={x:(Math.random()>.5?E(-.8,-1.2):E(.8,1.2))*s,y:(Math.random()>.5?E(-.8,-1.2):E(.8,1.2))*s},a.startSpeed=Math.sqrt(Math.pow(a.velocity.x,2)+Math.pow(a.velocity.y,2)),o.push(a)}var y=o.length;if(this.autostart)for(var f=0;f<y;f++)this.simulationApp.stage.addChild(o[f]),this.simulationApp.ticker.add(g.bind(null,o[f],o,S,this.simulationApp.loader));else for(var w=0;w<y;w++)this.simulationApp.stage.addChild(o[w]),this.simulationApp.ticker.addOnce(g.bind(null,o[w],o,S,this.simulationApp.loader))}function x(){if(this.simulationApp)return this.simulationApp.ticker.stop()}function N(){if(this.simulationApp)return this.simulationApp.ticker.start()}function k(){this.simulationApp&&(this.simulationApp.destroy(!1,{stageOptions:{children:!0}}),this.simulationApp=null)}var _=a(78),O=a(65),T=a(66),C=a(67),A=a(68),M=a(69),j=a(70),D=a(71),I=[{type:"small",value:2.5},"|",{type:"medium",value:5},"|",{type:"large",value:7.5}],W={2.5:[100,"|",200,"|",300,"|",400,"|",500,"|",700,"|",800,"|",1e3],5:[100,"|",200,"|",300,"|",400,"|",500,"|",600,"|",700,"|",800],7.5:[50,"|",100,"|","150","|",200,"|",300,"|",400,"|",500]},H=[{type:"slow",value:.5},"|",{type:"medium",value:1},"|",{type:"fast",value:1.5}],z=[0,"|",1e4,"|",15e3,"|",2e4,"|",3e4,"|",45e3,"|",6e4],R=[{type:"yes",value:!0},"|",{type:"no",value:!1}],q=(a(50),function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(t,e){return this.props.isOpen!=t.isOpen||this.props.buttonText!=t.buttonText||(this.props.settings.size!=t.settings.size||this.props.settings.speed!=t.settings.speed||this.props.settings.quantity!=t.settings.quantity||this.props.settings.deactivateAfter!=t.settings.deactivateAfter||this.props.settings.showTime!=t.settings.showTime||this.props.settings.showStats!=t.settings.showStats||this.props.settings.autorestart!=t.settings.autorestart)}},{key:"render",value:function(){var t=this.props,e=t.isOpen,a=t.toggle,n=t.startSimulation,s=t.buttonText,o=t.setSimulationSettings,l=t.settings,r=l.size,c=l.speed,u=l.quantity,m=l.deactivateAfter,h=l.showTime,d=l.showStats,g=l.autorestart;return i.a.createElement(_.a,{key:"simulator",isOpen:e,toggle:a,centered:!0,fade:!0,className:"simulator-modal"},i.a.createElement(O.a,{charCode:"X",toggle:a}),i.a.createElement(T.a,null,i.a.createElement(C.a,null,i.a.createElement(A.a,{className:"choice"},i.a.createElement("div",null,"Size of balls"),i.a.createElement(M.a,{className:"choice__options"},I.map((function(t,e){return"object"!=typeof t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({size:t.value})),onClick:o,active:t.value===r},t.type)}))))),i.a.createElement(C.a,null,i.a.createElement(A.a,{className:"choice"},i.a.createElement("div",null,"Number of balls"),i.a.createElement(M.a,{className:"choice__options"},W[r].map((function(t,e){return"|"===t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({quantity:t})),onClick:o,active:t===u},t)}))))),i.a.createElement(C.a,null,i.a.createElement(A.a,{className:"choice"},i.a.createElement("div",null,"Speed of balls"),i.a.createElement(M.a,{className:"choice__options"},H.map((function(t,e){return"object"!=typeof t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({speed:t.value})),onClick:o,active:t.value===c},t.type)}))))),i.a.createElement(C.a,null,i.a.createElement(A.a,{className:"choice"},i.a.createElement("div",null,"Deactivate ball after"),i.a.createElement(M.a,{className:"choice__options"},z.map((function(t,e){return"|"===t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({deactivateAfter:t})),onClick:o,active:t===m},0===t?"no":"".concat(t/1e3,"s"))}))))),i.a.createElement(C.a,{className:"col-12"},i.a.createElement(A.a,{className:"col-4 choice"},i.a.createElement("div",null,"Show time"),i.a.createElement(M.a,{className:"choice__options"},R.map((function(t,e){return"object"!==typeof t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({showTime:t.value})),onClick:o,active:t.value===h},t.type)})))),i.a.createElement(A.a,{className:"col-4 choice"},i.a.createElement("div",null,"Show stats"),i.a.createElement(M.a,{className:"choice__options"},R.map((function(t,e){return"object"!==typeof t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({showStats:t.value})),onClick:o,active:t.value===d},t.type)})))),i.a.createElement(A.a,{className:"col-4 choice"},i.a.createElement("div",null,"Autorestart"),i.a.createElement(M.a,{className:"choice__options"},R.map((function(t,e){return"object"!==typeof t?i.a.createElement(j.a,{className:"disabled",key:e},t):i.a.createElement(j.a,{key:e,tabIndex:"0","data-option":"".concat(JSON.stringify({autorestart:t.value})),onClick:o,active:t.value===g},t.type)})))))),i.a.createElement(D.a,{onClick:n,className:"simulator-modal__footer"},">>>\xa0\xa0 ",s," \xa0\xa0<<<"))}}]),a}(i.a.Component)),V=a(72),P=a(73),U=a(74),F=a(75),J=a(76),L=a(77),B=function(t){var e=t.toggleNavbarItemsExpand,a=t.isNavbarExpanded,n=t.toggleNavbarVisibility,s=t.isNavbarVisible,o=t.contagious,l=t.healthy,r=t.toggleSimulationDialog,c=t.toggleShareDialog,u=t.startTime,m=t.simulationSettings,h=m.showTime,d=m.showStats,g=u.getSeconds(),p=g<10?"0"+g:g;return i.a.createElement(V.a,{dark:!0,className:"main__navbar ".concat(!s&&"hidden"," d-inline-flex justify-content-between")},i.a.createElement(P.a,{className:"main__navbar__toggler ".concat(s&&"hidden"),onClick:n,disabled:s},i.a.createElement("svg",{height:"15",width:"20"},i.a.createElement("path",{d:"M-2 2 l12 12 M10 15 l12 -13 Z",fill:"none",strokeWidth:"5",stroke:"white"}))),i.a.createElement(V.a,{dark:!0,className:"col-6 main__navbar__left d-inline-flex justify-content-between",expand:"sm"},i.a.createElement(U.a,{onClick:e}),i.a.createElement(F.a,{isOpen:a,navbar:!0},i.a.createElement(M.a,{className:"navbar__nav left",navbar:!0},i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"navbar__nav__link",onClick:r},"Simulate")),i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"d-none d-sm-block navbar__nav__separator"},"|")),i.a.createElement(J.a,null,i.a.createElement(j.a,{data:"game",className:"navbar__nav__link",onClick:c},"Play game")),i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"d-none d-sm-block navbar__nav__separator"},"|")),i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"navbar__nav__link",onClick:c},"Share")),i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"d-none d-sm-block navbar__nav__separator"},"|")),i.a.createElement(J.a,null,i.a.createElement(j.a,{className:"navbar__nav__link",onClick:n},"Hide"))))),i.a.createElement(V.a,{dark:!0,className:"col-6 main__navbar__right d-inline-flex justify-content-between"},i.a.createElement(M.a,{className:"navbar__nav caption",navbar:!0},i.a.createElement(J.a,null,"TheCovidSimulator")),i.a.createElement(M.a,{className:"navbar__nav right",navbar:!0},i.a.createElement(J.a,{className:" d-inline-flex justify-content-between"},i.a.createElement(L.a,null,"Stay safe. For more visit\xa0"),i.a.createElement(j.a,{href:"https://www.countdownkings.com/",target:"_blank",rel:"nooperner noreferrer"},"CountdownKings.com")),i.a.createElement(J.a,{className:"stats ".concat(!s&&"drop")},d?i.a.createElement(i.a.Fragment,null,i.a.createElement(L.a,{className:"stats__infected"},"Infected:\xa0",o),i.a.createElement(L.a,{className:"stats__healthy"},"Healthy:\xa0",l)):""),i.a.createElement(J.a,{className:"timer ".concat(!s&&"drop")},h?"".concat(u.getMinutes(),":").concat(p):""))))},G=(a(60),function(t){var e=t.isOpen,a=t.toggle,n=t.copy,s=t.isCopied,o=t.shareModalTitle;return i.a.createElement(_.a,{key:"sharemodal",isOpen:e,toggle:a,centered:!0,className:"share-modal"},i.a.createElement(O.a,{charCode:"X",toggle:a},o),i.a.createElement(T.a,{className:"justify-content-center"},i.a.createElement(C.a,null,i.a.createElement(A.a,{className:"share"},"Share with your friends")),i.a.createElement(C.a,null,i.a.createElement(A.a,null,"https://www.covidsimulator.com")),i.a.createElement(C.a,null,i.a.createElement(A.a,null,s?i.a.createElement("div",{className:"copied__link"},"Link copied \ud83d\ude03"):i.a.createElement(P.a,{onClick:n},"Copy link")))),i.a.createElement(D.a,null,i.a.createElement(A.a,{className:"col-12 d-inline-flex justify-content-center"},"For more visit\xa0",i.a.createElement(j.a,{className:"footer__link",target:"_blank",rel:"noopener noreferrer",href:"https://www.countdownkings.com"},"CountdownKings.com"))))}),K=(a(61),a(62),function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).canvasRef=i.a.createRef(),n.autostart=!0,n.simulationApp=null,n.state={simulation:!0,game:!1,hasError:!1,error:null,currentTime:(new Date).getTime(),startTime:new Date(0),pause:!1,stop:!1,contagious:1,healthy:199,startButtonText:"CONTINUE SIMULATION",isCopied:!1,isNavbarExpanded:!1,isNavbarVisible:!0,shareModalTitle:"",shareModalOpen:!1,simulationSettingsOpen:!1,simulationSettings:{size:7.5,speed:1,quantity:200,deactivateAfter:0,showTime:!0,showStats:!0,autorestart:!0}},n.interval=null,n.canvasWidth=window.innerWidth,n.canvasHeight=window.innerHeight,n.simulationStop=k.bind(Object(u.a)(n)),n.simulationStart=f.bind(Object(u.a)(n)),n.simulationPause=x.bind(Object(u.a)(n)),n.simulationUnPause=N.bind(Object(u.a)(n)),n.togglePause=n.togglePause.bind(Object(u.a)(n)),n.intervalTime=n.intervalTime.bind(Object(u.a)(n)),n.handleResize=n.handleResize.bind(Object(u.a)(n)),n.copyToClipboard=n.copyToClipboard.bind(Object(u.a)(n)),n.simulationRestart=n.simulationRestart.bind(Object(u.a)(n)),n.toggleShareDialog=n.toggleShareDialog.bind(Object(u.a)(n)),n.stopStartSimulation=n.stopStartSimulation.bind(Object(u.a)(n)),n.setSimulationSettings=n.setSimulationSettings.bind(Object(u.a)(n)),n.toggleSimulationDialog=n.toggleSimulationDialog.bind(Object(u.a)(n)),n.toggleNavbarVisibility=n.toggleNavbarVisibility.bind(Object(u.a)(n)),n.toggleNavbarItemsExpand=n.toggleNavbarItemsExpand.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.simulationStart(!0),window.addEventListener("resize",this.handleResize),this.interval=Object(d.setDriftlessInterval)(this.intervalTime,1e3)}},{key:"componentDidCatch",value:function(t,e){}},{key:"componentWillUnmount",value:function(){Object(d.clearDriftless)(this.interval),this.simulationApp.destroy(!0)}},{key:"intervalTime",value:function(){var t=this;this.setState((function(e){return t.state.pause||t.state.stop?{currentTime:(new Date).getTime()}:{currentTime:(new Date).getTime(),startTime:new Date(e.startTime.getTime()+1e3)}}))}},{key:"handleResize",value:function(t){this.canvasWidth=window.innerWidth<this.canvasWidth?this.canvasWidth:window.innerWidth,this.canvasHeight=window.innerHeight<this.canvasHeight?this.canvasHeight:window.innerHeight}},{key:"stopStartSimulation",value:function(){this.state.pause&&!this.state.stop?this.toggleSimulationDialog():(this.simulationStart(!0),this.setState((function(t){return{startTime:new Date(0),stop:!1,pause:!1,startButtonText:"CONTINUE SIMULATION",simulationSettingsOpen:!1}})))}},{key:"simulationRestart",value:function(){console.log("wtffff"),this.simulationStop(),this.simulationStart(!0),this.setState((function(t){return{startTime:new Date(0),stop:!1,pause:!1,startButtonText:"CONTINUE SIMULATION",simulationSettingsOpen:!1,healthy:t.simulationSettings.quantity-1,contagious:1}}))}},{key:"setSimulationSettings",value:function(t){var e=this,a=t.currentTarget.getAttribute("data-option"),n=JSON.parse(a)||{};this.setState((function(t){var a=Object(l.a)({},t.simulationSettings,{},n);return n.size||n.quantity||n.speed?(e.simulationStop(),e.simulationStart(!1,a),{simulationSettings:a,startTime:new Date(0),healthy:a.quantity-1,contagious:1,stop:!0,pause:!0,startButtonText:"START SIMULATION"}):{simulationSettings:a}}))}},{key:"togglePause",value:function(){return this.state.pause&&!this.state.stop?this.simulationUnPause():this.simulationPause()}},{key:"toggleShareDialog",value:function(t){var e=this;this.togglePause();var a=t.currentTarget.getAttribute("data");this.setState((function(t){return{pause:!t.pause,shareModalOpen:!t.shareModalOpen,shareModalTitle:a?"GAME COMING SOON":""}})),setTimeout((function(){e.setState({isCopied:!1})}),1e3)}},{key:"toggleSimulationDialog",value:function(){this.togglePause(),this.setState((function(t){return{simulationSettingsOpen:!t.simulationSettingsOpen,pause:!t.pause}}))}},{key:"toggleNavbarItemsExpand",value:function(){this.setState((function(t){return{isNavbarExpanded:!t.isNavbarExpanded}}))}},{key:"toggleNavbarVisibility",value:function(){this.setState((function(t){return{isNavbarVisible:!t.isNavbarVisible}}))}},{key:"copyToClipboard",value:function(){var t=this;navigator.permissions.query({name:"clipboard-write"}).then((function(e){"granted"!=e.state&&"prompt"!=e.state||(navigator.clipboard.writeText("https://www.covidsimulator.com"),t.setState({isCopied:!0}))}))}},{key:"render",value:function(){return i.a.createElement("section",{className:"main"},i.a.createElement(B,{currentTime:this.state.currentTime,startTime:this.state.startTime,toggleNavbarItemsExpand:this.toggleNavbarItemsExpand,toggleNavbarVisibility:this.toggleNavbarVisibility,isNavbarExpanded:this.state.isNavbarExpanded,isNavbarVisible:this.state.isNavbarVisible,toggleSimulationDialog:this.toggleSimulationDialog,toggleShareDialog:this.toggleShareDialog,simulationSettings:this.state.simulationSettings,contagious:this.state.contagious,healthy:this.state.healthy}),i.a.createElement(q,{startSimulation:this.stopStartSimulation,isOpen:this.state.simulationSettingsOpen,toggle:this.toggleSimulationDialog,buttonText:this.state.startButtonText,settings:this.state.simulationSettings,setSimulationSettings:this.setSimulationSettings}),i.a.createElement(G,{isOpen:this.state.shareModalOpen,toggle:this.toggleShareDialog,copy:this.copyToClipboard,isCopied:this.state.isCopied,shareModalTitle:this.state.shareModalTitle}),i.a.createElement("article",{className:"main__canvas"},i.a.createElement("canvas",{onClick:this.toggleSimulationDialog,id:"canvas",ref:this.canvasRef,className:"canvas"},"Sorry, your browser doesn't support HTML5 ")))}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0}}}]),a}(i.a.Component));a(63);var X=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.b66e83dc.chunk.js.map