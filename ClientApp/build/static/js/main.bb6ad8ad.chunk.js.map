{"version":3,"sources":["HomePage/assets/viralballs-about-img.png","HomePage/assets/gameStart.mp3","HomePage/helpers/simulation/updateSimulation.js","HomePage/helpers/simulation/startSimulation.js","HomePage/helpers/game/updateGame.js","HomePage/helpers/game/startGame.js","HomePage/helpers/actions.js","HomePage/components/SimulationDialog/simulationOptions.js","HomePage/components/SimulationDialog/SimulationDialog.js","HomePage/components/Navbar/Navbar.js","HomePage/components/ShareDialog/ShareDialog.js","HomePage/components/GameDialog/gameOptions.js","HomePage/components/HowToPlayDialog/howToPlayInstructions.js","HomePage/components/GameDialog/GameDialog.js","HomePage/components/QuarantineButtons/QuarantineButtons.js","HomePage/components/TimeChallengeEndDialog/TimeChallengeEndDialog.js","HomePage/components/TimeOpenEndDialog/TimeOpenEndDialog.js","HomePage/components/AboutDialog/AboutDialog.js","HomePage/components/StaySafeDialog/StaySafeDialog.js","HomePage/components/HowToPlayDialog/HowToPlayDialog.js","HomePage/components/BeatYourFriendDialog/BeatYourFriendDialog.js","HomePage/helpers/game/gameState.js","HomePage/helpers/simulation/simulationState.js","HomePage/main.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","updateSimulation","sprite","spriteArr","circleIntersect","loader","x","radius","window","innerWidth","reactContext","canvasWidth","velocity","y","innerHeight","canvasHeight","state","simulationSettings","contagiousFrom","Date","getTime","contagion","texture","resources","sheet","textures","setState","prevState","contagious","healthy","i","length","myID","otherSprite","toggleSimulationPause","simulationRestart","resolveCollision","rotate","angle","Math","cos","sin","particle","otherParticle","xVelocityDiff","yVelocityDiff","atan2","u1","u2","v1","v2","vFinal1","vFinal2","particlePreservedSpeed","preserveSpeed","otherParticlePreservedSpeed","vFinal","newSpeed","sqrt","startSpeed","startSimulation","autostart","this","simulationApp","PIXI","width","height","resolution","devicePixelRatio","autoDensity","sharedLoader","isWebGL","isWebGLSupported","renderer","context","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","view","style","document","getElementById","appendChild","add","on","resource","console","log","progress","name","err","error","load","handleOnImageLoaded","bind","resize","e","addEventListener","randomIntNumber","min","max","floor","random","x1","y1","r1","x2","y2","r2","size","speed","nrImages","quantity","maxWidth","maxHeight","whiteBall","redBall","j","anchor","randomX","randomY","pow","push","len","index","stage","addChild","ticker","addOnce","updateGame","quarantineArr","quarantineObj","clockTime","gameSettings","getSeconds","toggleGamePause","gameEnded","playerWin","isTextSprite","dropTime","seconds","duration","text","isQuarantineSprite","draggedQuarantine","textSprite","isDragged","quarantineCancelled","green","beginFill","drawCircle","endFill","generateCanvasTexture","alpha","setQuarantineNonactive","resetDraggedQuarantineId","quarantinePlaced","isActive","empty","lineStyle","id","overlap","quarantinesForCheck","filter","quarantine","quarantineOverlapping","red","fill","difficultyTime","0","1","2","difficulty","randomTimeInSeconds","round","d","getContagion","particleDistance","xDist","yDist","distance","startGame","gameApp","nrOfQuarantines","timeTextArr","formattedTime","timeText","fontSize","fontFamily","set","greenTexture","particleID","isBeingDropped","tries","isParticleSprite","forEach","item","reduce","acc","obj","Object","assign","availableQuarantines","map","spriteIndex","pause","stop","unPause","start","destroy","sizeOptions","type","value","quantityValues","8","speedOptions","deactivateOptions","booleanOptions","SimulationDialog","nextProps","nextState","isSimulationActive","props","isOpen","buttonText","settings","prevProps","minQuantity","maxQuantity","slice","setSimulationSettings","toggle","isSimulationStopped","deactivateAfter","showTime","showStats","autorestart","Modal","key","zIndex","centered","fade","className","ModalHeader","charCode","ModalBody","Row","Container","Nav","sizeOption","idx","NavLink","tabIndex","data-option","JSON","stringify","onClick","active","quantityValue","speedOption","deactivateOption","timeOption","statOption","restartOption","ModalFooter","React","Component","NavBar","formattedSeconds","minutes","onMouseMove","toggleNavbarItemsExpand","isNavbarExpanded","toggleNavbarVisibility","isNavbarVisible","toggleStaySafeDialog","isGameActive","gamePaused","toggleSimulationDialog","toggleShareDialog","toggleGameDialog","toggleAboutDialog","delayInSeconds","mode","currentSeconds","shouldCountdownBeVisible","delayedSeconds","getMinutes","coundownTime","gameStartCountdownTime","Navbar","dark","expand","NavbarToggler","Collapse","navbar","NavItem","data","NavbarText","href","target","rel","Button","disabled","src","alt","ShareDialog","isCopied","copy","role","aria-label","modeOptions","difficultyOptions","quantityDiffVals","speedDiffValues","speedToString","0.3","0.6","sizeToString","5","10","GameDialog","instructionsOpen","modeType","onMouseEnterInstructions","onMouseLeaveInstructions","parse","currentTarget","getAttribute","changedSpeed","setGameSettings","isGameStopped","modeOption","data-type","onMouseEnter","onMouseLeave","difficultyOption","title","data-title","QuarantineButtons","quarantineButtonsActive","setQuarantineInMotion","onPointerDown","TimeChallengeEndDialog","closeGameEndDialog","didPlayerWin","shouldDialogOpen","TimeOpenEndDialog","copyToClipboard","navigator","permissions","query","then","result","clipboard","writeText","correctedClockTime","AboutDialog","onStaySafeLinkClick","setTimeout","aboutImage","StaySafeDialog","HowToPlayDialog","instructions","instruction","BeatYourFriendDialog","audioStart","gameStopped","gameSettingsOpen","gameRestarting","quarantineBeingDragged","resetSettings","howToPlayDialogOpen","startButtonText","onContextMenuHideQuarantine","preventDefault","onWheelScroll","deltaY","pageX","pageY","prevstate","stopStartGame","Audio","sound","play","targetData","parsedData","newGameSettings","indexOf","concat","unpause","simulationPaused","simulationStopped","simulationRestarting","simulationSettingsOpen","stopStartSimulation","gameResetSettings","newSimulationSettings","HomePage","hasError","currentTime","shareDialogOpen","aboutDialogOpen","staySafeDialogOpen","beatYourFriendDialogOpen","interval","toggleDialog","toggleHowToPlayDialog","toggleBeatYourFriendDialog","intervalTime","handleResize","handleBlur","handleRefocus","setDriftlessInterval","errorInfo","clearDriftless","onWheel","onContextMenu","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.bb6ad8ad.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/viralballs-about-img.fe648735.png\";","module.exports = __webpack_public_path__ + \"static/media/gameStart.80b0b014.mp3\";","export const updateSimulation = (sprite, spriteArr, circleIntersect, loader) => {\r\n\t// X BOUNDARIES\r\n\tif ((sprite.x + sprite.radius) > (window.innerWidth < sprite.reactContext.canvasWidth ? sprite.reactContext.canvasWidth : window.innerWidth )) {\r\n\t\tsprite.velocity.x = -sprite.velocity.x;\r\n\t}\r\n\tif ((sprite.x - sprite.radius) < 0) {\r\n\t\tsprite.velocity.x = -sprite.velocity.x;\r\n\t}\r\n\t// Y BOUNDARIES\r\n\tif ((sprite.y + sprite.radius) > (window.innerHeight < sprite.reactContext.canvasHeight ? sprite.reactContext.canvasHeight : window.innerHeight)) { // resize only up\r\n\t\tsprite.velocity.y = -sprite.velocity.y;\r\n\t}\r\n\tif ((sprite.y - sprite.radius) < 0) {\r\n\t\tsprite.velocity.y = -sprite.velocity.y;\r\n\t}\r\n\t// CALCULATE DEACTIVATION TIME IF APPLIED\r\n\tif (sprite.reactContext.state.simulationSettings[\"deactivateAfter\"] > 0) {\r\n\t\tif (sprite.contagiousFrom && (new Date().getTime() - sprite.contagiousFrom) > sprite.reactContext.state.simulationSettings[\"deactivateAfter\"]) {\r\n\t\t\tsprite.contagion = 0;\r\n\t\t\tsprite.contagiousFrom = null;\r\n\t\t\tsprite.texture = loader.resources.sheet.textures[\"ball-white-15.png\"];\r\n\t\t\tsprite.reactContext.setState(prevState => ({ contagious: prevState.contagious - 1, healthy: prevState.healthy + 1 }));\r\n\t\t}\r\n\t}\r\n\t// CALCULATE COLLISION DETECTION TO ALL OTHER IMAGES\r\n\tfor (let i = 0; i < spriteArr.length; i++) {\r\n\t\tif (sprite.myID === spriteArr[i].myID) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (circleIntersect(sprite.x, sprite.y, sprite.radius, spriteArr[i].x, spriteArr[i].y, spriteArr[i].radius)) {\t\t\r\n\t\t\tconst otherSprite = spriteArr[i];\r\n\t\t\t// with deactivation time on, any red can infect another red again\r\n\t\t\tif (sprite.reactContext.state.simulationSettings[\"deactivateAfter\"] > 0 && (otherSprite.contagion || sprite.contagion)) {\r\n\t\t\t\tsprite.contagiousFrom = new Date().getTime();\r\n\t\t\t\totherSprite.contagiousFrom = new Date().getTime();\r\n\t\t\t}\r\n\t\t\t// only calculate crashes where one particle is contagious\r\n\t\t\tif (otherSprite.contagion && !sprite.contagion) {\t\t\t\t\r\n\t\t\t\tsprite.reactContext.setState(prevState => ({ contagious: prevState.contagious + 1, healthy: prevState.healthy - 1 }));\r\n\t\t\t\tsprite.contagion = 1;\r\n\t\t\t\tsprite.texture = loader.resources.sheet.textures[\"ball-red-15.png\"];\r\n\t\t\t\t// ON AUTORESTART=TRUE\r\n\t\t\t\tif (sprite.reactContext.state.simulationSettings[\"autorestart\"] && sprite.reactContext.state.healthy === 0) {\r\n\t\t\t\t\tsprite.reactContext.toggleSimulationPause();\r\n\t\t\t\t\tsprite.reactContext.simulationRestart();\r\n\t\t\t\t}\r\n\t\t\t} else if (sprite.contagion && !otherSprite.contagion) {\r\n\t\t\t\tsprite.reactContext.setState(prevState => ({ contagious: prevState.contagious + 1, healthy: prevState.healthy - 1 }));\r\n\t\t\t\totherSprite.contagion = 1;\r\n\t\t\t\totherSprite.texture = loader.resources.sheet.textures[\"ball-red-15.png\"];\r\n\t\t\t\t// ON AUTORESTART=TRUE\r\n\t\t\t\tif (sprite.reactContext.state.simulationSettings[\"autorestart\"] && sprite.reactContext.state.healthy === 0) {\r\n\t\t\t\t\tsprite.reactContext.toggleSimulationPause();\r\n\t\t\t\t\tsprite.reactContext.simulationRestart();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresolveCollision(sprite, otherSprite);\r\n\t\t}\r\n\t}\r\n\r\n\tsprite.x += sprite.velocity.x;\r\n\tsprite.y += sprite.velocity.y;\r\n\r\n}\r\n\r\n/**\r\n * Rotates coordinate system for velocities\r\n *\r\n * Takes velocities and alters them as if the coordinate system they're on was rotated\r\n *\r\n * @param  Object | velocity | The velocity of an individual particle\r\n * @param  Float  | angle    | The angle of collision between two objects in radians\r\n * @return Object | The altered x and y velocities after the coordinate system has been rotated\r\n */\r\nfunction rotate(velocity, angle) {\r\n\tconst rotatedVelocities = {\r\n\t\tx: velocity.x * Math.cos(angle) - velocity.y * Math.sin(angle),\r\n\t\ty: velocity.x * Math.sin(angle) + velocity.y * Math.cos(angle)\r\n\t};\r\n\treturn rotatedVelocities;\r\n}\r\n\r\n/**\r\n * Swaps out two colliding particles' x and y velocities after running through\r\n * an elastic collision reaction equation\r\n *\r\n * @param  Object | particle      | A particle object with x and y coordinates, plus velocity\r\n * @param  Object | otherParticle | A particle object with x and y coordinates, plus velocity\r\n * @return Null | Does not return a value\r\n */\r\n\r\nfunction resolveCollision(particle, otherParticle) {\r\n\tconst xVelocityDiff = particle.velocity.x - otherParticle.velocity.x;\r\n\tconst yVelocityDiff = particle.velocity.y - otherParticle.velocity.y;\r\n\r\n\tconst xDist = otherParticle.x - particle.x;\r\n\tconst yDist = otherParticle.y - particle.y;\r\n\r\n\t// Prevent accidental overlap of images\r\n\tif (xVelocityDiff * xDist + yVelocityDiff * yDist > 0) {\r\n\r\n\t\t// Grab angle between the two colliding images\r\n\t\tconst angle = -Math.atan2(otherParticle.y - particle.y, otherParticle.x - particle.x);\r\n\r\n\t\t// Store mass in var for better readability in collision equation\r\n\t\t// const m1 = particle.mass;\r\n\t\t// const m2 = otherParticle.mass;\r\n\r\n\t\t// Velocity before equation\r\n\t\tconst u1 = rotate(particle.velocity, angle);\r\n\t\tconst u2 = rotate(otherParticle.velocity, angle);\r\n\r\n\t\t// Velocity after 1d collision equation\r\n\t\t// (mass) const v1 = { x: u1.x * (m1 - m2) / (m1 + m2) + u2.x * 2 * m2 / (m1 + m2), y: u1.y };\r\n\t\t// (mass) const v2 = { x: u2.x * (m1 - m2) / (m1 + m2) + u1.x * 2 * m2 / (m1 + m2), y: u2.y };\r\n\t\tconst v1 = { x: u2.x, y: u1.y };\r\n\t\tconst v2 = { x: u1.x, y: u2.y };\r\n\r\n\t\t// Final velocity after rotating axis back to original location\r\n\t\tconst vFinal1 = rotate(v1, -angle);\r\n\t\tconst vFinal2 = rotate(v2, -angle);\r\n\r\n\t\t// PRESERVE SPEED - calculate startSpeed and newSpeed ratio and apply it to particle x and y velocities\r\n\t\tconst particlePreservedSpeed = preserveSpeed(particle, vFinal1);\r\n\t\tconst otherParticlePreservedSpeed = preserveSpeed(otherParticle, vFinal2);\r\n\r\n\t\t// Swap particle velocities for realistic bounce effect\r\n\t\tparticle.velocity.x = particlePreservedSpeed.x;\r\n\t\tparticle.velocity.y = particlePreservedSpeed.y;\r\n\r\n\t\totherParticle.velocity.x = otherParticlePreservedSpeed.x;\r\n\t\totherParticle.velocity.y = otherParticlePreservedSpeed.y;\r\n\t}\r\n}\r\n\r\nfunction preserveSpeed(particle, vFinal) {\r\n\tconst newSpeed = Math.sqrt(vFinal.x * vFinal.x + vFinal.y * vFinal.y);\r\n\t\r\n\treturn { // RETURN SPEED RATIO\r\n\t\tx: vFinal.x * particle.startSpeed / newSpeed,\r\n\t\ty: vFinal.y * particle.startSpeed / newSpeed\r\n\t}\r\n\r\n}\r\n","import { updateSimulation } from \"./updateSimulation\";\r\nimport * as PIXI from \"pixi.js-legacy\";\r\n\r\nexport function startSimulation(autostart, simulationSettings = null) {\r\n\tthis.autostart = autostart || false;\r\n\t// UTILITIES\r\n\r\n\tthis.simulationApp = new PIXI.Application({\r\n\t\twidth: this.canvasWidth,\r\n\t\theight: this.canvasHeight,\r\n\t\tresolution: window.devicePixelRatio || 1,\r\n\t\tautoDensity: true,\r\n\t\tsharedLoader: true\r\n\t});\r\n\tconst isWebGL = PIXI.utils.isWebGLSupported();\t\r\n\tif (!isWebGL) {\r\n\t\tthis.simulationApp.renderer.context.mozImageSmoothingEnabled = false\r\n\t\tthis.simulationApp.renderer.context.webkitImageSmoothingEnabled = false\r\n\t}\r\n\t/*\r\n\t* Fix for iOS GPU issues\r\n\t*/\r\n\tthis.simulationApp.renderer.view.style['transform'] = 'translatez(0)'\r\n\r\n\r\n\tdocument.getElementById(\"canvas-container\").appendChild(this.simulationApp.view);\r\n\r\n\r\n\tif (this.simulationApp.loader.resources.sheet == null) {\r\n\t\tthis.simulationApp.loader.add(\"sheet\", \"balls.json\")\r\n\t\t\t.on(\"progress\", (loader, resource) => console.log(loader.progress + \"% loaded\"))\r\n\t\t\t.on(\"load\", (loader, resource) => console.log(\"Asset loaded\" + resource.name))\r\n\t\t\t.on(\"error\", err => console.error(\"load error\", err))\r\n\t\t\t.load(handleOnImageLoaded.bind(this, simulationSettings));\r\n\t} else {\r\n\t\tthis.simulationApp.loader.load(handleOnImageLoaded.bind(this, simulationSettings));\r\n\t}\r\n\r\n\t// Resize function window\r\n\tconst resize = (e) => {\r\n\t\tif (this.simulationApp) {\r\n\t\t\t// Resize the renderer\r\n\t\t\tthis.simulationApp.renderer.resize(window.innerWidth < this.canvasWidth ? this.canvasWidth : window.innerWidth,\r\n\t\t\t\t\t\t\t\twindow.innerHeight < this.canvasHeight ? this.canvasHeight : window.innerHeight);\r\n\t\t}\r\n\t// You can use the 'screen' property as the renderer visible\r\n\t// area, this is more useful than view.width/height because\r\n\t// it handles resolution\r\n\t//rect.position.set(app.screen.width, app.screen.height);\r\n\t}\r\n\t// Listen for window resize events\r\n\twindow.addEventListener('resize', resize);\r\n}\r\n\r\nfunction randomIntNumber(min, max) {\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n/**\r\n * Intersection calculation. Multiplication is much faster than getting the square root with Math.sqrt(), so distance is calculated without getting the root \r\n * and the sum of the radii is multiplied by itself. The outcome stays the same, but the performance is better.\r\n * @param {Float} x1 \r\n * @param {Float} y1 \r\n * @param {Int}   r1 \r\n * @param {Float} x2 \r\n * @param {Float} y2 \r\n * @param {Int}\t  r2 \r\n */\r\nfunction circleIntersect(x1, y1, r1, x2, y2, r2) {\r\n\r\n    // Calculate the distance between the two circles\r\n    var squareDistance = (x1-x2)*(x1-x2) + (y1-y2)*(y1-y2);\r\n\r\n    // When the distance is smaller or equal to the sum\r\n    // of the two radius, the circles touch or overlap\r\n    return squareDistance <= ((r1 + r2) * (r1 + r2))\r\n}\r\n\r\nfunction handleOnImageLoaded(simulationSettings) {\r\n\tconst {\r\n\t\tsize: radius,\r\n\t\tspeed,\r\n\t\tquantity\r\n\t} = simulationSettings == null ? this.state.simulationSettings : simulationSettings;\r\n\t\r\n\tlet contagion, sprite;\r\n\tconst spriteArr = [];\r\n\tconst nrImages = +quantity;\r\n\tconst maxWidth = this.canvasWidth - radius * 2.5;\r\n\tconst maxHeight = this.canvasHeight - radius * 2.5;\r\n\tconst whiteBall = this.simulationApp.loader.resources.sheet.textures[\"ball-white-15.png\"];\r\n\tconst redBall = this.simulationApp.loader.resources.sheet.textures[\"ball-red-15.png\"];\r\n\r\n\tlet x, y;\r\n\tfor (let i = 0; i < nrImages; i++) {\r\n\t\t// red ball always starts in the middle - for more beautiful effec\r\n\t\tif (i === 0) {\r\n\t\t\tcontagion = 1;\r\n\t\t\tx = maxWidth / 2;\r\n\t\t\ty = maxHeight / 2;\r\n\t\t} else {\r\n\t\t\tcontagion = 0;\r\n\t\t\tx = randomIntNumber(radius * 2, maxWidth);\r\n\t\t\ty = randomIntNumber(radius * 2, maxHeight);\r\n\t\t}\r\n\t\tif (i !== 0) {\r\n\t\t\tfor (let j = 0; j < spriteArr.length; j++) {\r\n\t\t\t\tif (circleIntersect(x, y, radius, spriteArr[j].x, spriteArr[j].y, spriteArr[j].radius)) {\t\r\n\t\t\t\t\tx = randomIntNumber(radius * 2, maxWidth);\r\n\t\t\t\t\ty = randomIntNumber(radius * 2, maxHeight);\r\n\t\t\t\t\t// set new x, y recursively\r\n\t\t\t\t\tj = -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (contagion) {\t\t\t\t\r\n\t\t\tsprite = new PIXI.Sprite(redBall);\r\n\t\tsprite.y = y;\r\n\t\t} else {\r\n\t\t\tsprite = new PIXI.Sprite(whiteBall);\r\n\t\t}\r\n\t\tsprite.x = x;\r\n\t\tsprite.y = y;\r\n\t\tsprite.width = radius * 2;\r\n\t\tsprite.height = radius * 2;\r\n\t\tsprite.anchor.x = .5;\r\n\t\tsprite.anchor.y = .5;\r\n\t\tsprite.myID = i;\r\n\t\tsprite.radius = radius;\r\n\t\tsprite.reactContext = this;\r\n\t\tsprite.contagion = contagion;\r\n\t\tsprite.contagiousFrom = null;\r\n\t\tconst randomX = Math.random() - .5;\r\n\t\tconst randomY = Math.random() - .5;\r\n\t\tsprite.velocity = { \r\n\t\t\tx: randomX < 0  && randomX > -.3 ? (randomX*speed) - speed : (randomX > 0  && randomX < .3 ? (randomX) + speed : randomX * speed),\r\n\t\t\ty: randomY < 0  && randomY > -.3 ? (randomY*speed) - speed : (randomY > 0  && randomY < .3 ? (randomY) + speed : randomY * speed),\r\n\t\t};\r\n\t\t\r\n\t\t// calculate starting speed (hypothenuse from x, y)\r\n\t\tsprite.startSpeed = Math.sqrt(Math.pow(sprite.velocity.x, 2) + Math.pow(sprite.velocity.y, 2));\r\n\t\tspriteArr.push(sprite);\r\n\t}\r\n\t\r\n\tconst len = spriteArr.length;\t\r\n\t// draw and animate\r\n\tif (this.autostart) {\r\n\t\tfor (let index = 0; index < len; index++) {\r\n\t\t\tthis.simulationApp.stage.addChild(spriteArr[index]);\r\n\t\t\tthis.simulationApp.ticker.add(updateSimulation.bind(null, spriteArr[index], spriteArr, circleIntersect, this.simulationApp.loader));\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let index = 0; index < len; index++) {\r\n\t\t\tthis.simulationApp.stage.addChild(spriteArr[index]);\r\n\t\t\tthis.simulationApp.ticker.addOnce(updateSimulation.bind(null, spriteArr[index], spriteArr, circleIntersect, this.simulationApp.loader));\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import * as PIXI from \"pixi.js-legacy\";\r\n\r\nexport const updateGame = (sprite, spriteArr, quarantineArr, quarantineObj, circleIntersect, loader, randomIntNumber) => {\r\n\t// there are no instantiated variables due to garbage collection (optimization purposes)\r\n\t// DELAY START TIME\r\n\tif (sprite.reactContext.state.clockTime.getTime() <= sprite.reactContext.state.gameSettings[\"delayInSeconds\"]*1000) {\r\n\t\treturn;\r\n\t}\r\n\t// GAME END - Time Challenge: show Won Dialog (GameEndDialog) - time is 0 and game is obviously still running - so win //TODO: should put this into some state variable\r\n\tif (sprite.reactContext.state.gameSettings[\"mode\"] === 1 && sprite.reactContext.state.clockTime.getSeconds() > (300 + sprite.reactContext.state.gameSettings[\"delayInSeconds\"])) {\r\n\t\tif (sprite.myID === 0) {\r\n\t\t\t// it is imperative to call these functions only once\r\n\t\t\tsprite.reactContext.toggleGamePause();\r\n\t\t\tsprite.reactContext.gameEnded({ playerWin: true });\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t// CHANGE TEXT - and stop calculations to avoid collision detection of Text object\r\n\tif (sprite.isTextSprite) {\r\n\t\tif (sprite.dropTime != null) {\r\n\t\t\tconst seconds = (sprite.dropTime + sprite.duration - sprite.reactContext.state.clockTime.getTime()) / 1000;\r\n\t\t\tsprite.text = `0:${seconds < 10 ? \"0\" + seconds : seconds}`;\r\n\t\t}\r\n\t\t// must not calculate any further as text object has no need for it\r\n\t\treturn;\r\n\t}\r\n\r\n\t// QUARANTINE (and text)\r\n\tif (sprite.isQuarantineSprite) {\r\n\t\t// 1. DRAG/DROP/CANCEL/MOVE-RESIZE - eval if it is the dragged quarantine and it hasn't been placed yet (dropTime == null)\r\n\t\tif (sprite.myID === sprite.reactContext.state.draggedQuarantine[\"id\"] && sprite.dropTime == null) {\r\n\t\t\tconst textSprite = spriteArr[sprite.myID + quarantineObj.length] || {};\r\n\t\t\tsprite.isDragged = true;\r\n\t\t\t// CANCEL dragged quarantine if right clicked and stop calculating\r\n\t\t\tif (sprite.reactContext.state.quarantineCancelled) {\r\n\t\t\t\tsprite.x = -500 * textSprite.myID;\r\n\t\t\t\tsprite.y = -500 * textSprite.myID;\r\n\t\t\t\ttextSprite.x = -500;\r\n\t\t\t\ttextSprite.y = -500;\r\n\t\t\t\tsprite.isDragged = false;\r\n\r\n\t\t\t\t// set quarantine texture for future drag\r\n\t\t\t\tconst green = new PIXI.Graphics();\r\n\t\t\t\tgreen.beginFill(0x69b11c, 0.35);\r\n\t\t\t\tgreen.drawCircle(0,0,sprite.radius);\r\n\t\t\t\tgreen.endFill();\r\n\t\t\t\tsprite.texture = green.generateCanvasTexture();\r\n\t\t\t\tsprite.alpha = 1;\r\n\t\t\t\t// sets quarantineCancelled => false\r\n\t\t\t\tsprite.reactContext.setQuarantineNonactive(sprite.myID);\r\n\t\t\t\tsprite.reactContext.resetDraggedQuarantineId();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// SET DROP TIME - if quarantine is draged and placed, it cannot have dropTime null at the same time\r\n\t\t\telse if (sprite.reactContext.state.quarantinePlaced) {\r\n\t\t\t\tconst dropTime = sprite.reactContext.state.clockTime.getTime();\r\n\t\t\t\tsprite.dropTime = dropTime;\r\n\t\t\t\ttextSprite.dropTime = dropTime;\r\n\r\n\t\t\t\tsprite.isDragged = false;\r\n\t\t\t\tsprite.isActive = true;\r\n\r\n\t\t\t\t// set quarantine TEXTURE for placement\r\n\t\t\t\tconst empty = new PIXI.Graphics();\r\n\t\t\t\tempty.beginFill(0x000, 0);\r\n\t\t\t\tempty.lineStyle(5,0x69b11c,1); // green border\r\n\t\t\t\tempty.drawCircle(0,0,sprite.radius);\r\n\t\t\t\tempty.endFill();\r\n\t\t\t\tsprite.texture = empty.generateCanvasTexture();\r\n\t\t\t\tsprite.alpha = 1;\r\n\r\n\t\t\t\tsprite.x = sprite.reactContext.state.draggedQuarantine.x;\r\n\t\t\t\tsprite.y = sprite.reactContext.state.draggedQuarantine.y;\r\n\t\t\t\t// TEXT\r\n\t\t\t\ttextSprite.x = sprite.reactContext.state.draggedQuarantine.x;\r\n\t\t\t\ttextSprite.y = sprite.reactContext.state.draggedQuarantine.y + 15 - spriteArr[sprite.reactContext.state.draggedQuarantine.id].width / 2;\r\n\t\t\t\t// reset dragged quarantine so it doesn't trigger on next loop calc\r\n\t\t\t\tsprite.reactContext.resetDraggedQuarantineId();\r\n\t\t\t}\r\n\t\t\t// DRAG and RESIZE on wheelscroll\r\n\t\t\telse if (sprite.isDragged) {\r\n\t\t\t\tconst size = sprite.reactContext.state.draggedQuarantine[\"size\"]\r\n\r\n\t\t\t\t// resize and move (x, y)\r\n\t\t\t\tsprite.width = size < 75 ? 75: size > 360 ? 360 : size;\r\n\t\t\t\tsprite.height = size < 75 ? 75: size > 360 ? 360 : size;\r\n\t\t\t\tsprite.radius = size < 75 ? 35: size > 360 ? 180 : size / 2;\r\n\t\t\t\tsprite.x = sprite.reactContext.state.draggedQuarantine.x;\r\n\t\t\t\tsprite.y = sprite.reactContext.state.draggedQuarantine.y;\r\n\t\t\t\t// TEXT\r\n\t\t\t\ttextSprite.x = size < 100 ? sprite.reactContext.state.draggedQuarantine.x : size > 300 ? sprite.reactContext.state.draggedQuarantine.x - 5 : sprite.reactContext.state.draggedQuarantine.x;\r\n\t\t\t\ttextSprite.y = sprite.reactContext.state.draggedQuarantine.y + 15 - spriteArr[sprite.reactContext.state.draggedQuarantine.id].width / 2;\r\n\r\n\t\t\t\t// QUARANTINE OVERLAPPING- when quarantine is not dropped, it is not yet being calculated in the collisions\r\n\t\t\t\tlet overlap = false;\r\n\t\t\t\t// only check active quarantines (they become active at the start of drag)\r\n\t\t\t\tconst quarantinesForCheck = quarantineArr.filter(quarantine => quarantine.isActive);\r\n\t\t\t\tfor (let index = 0; index < quarantinesForCheck.length; index++) {\r\n\t\t\t\t\t// don't check self\r\n\t\t\t\t\tif (sprite.myID === quarantinesForCheck[index].myID) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// calc intersection - break for loop if it intersects\r\n\t\t\t\t\tif (circleIntersect(sprite.x, sprite.y, sprite.radius, quarantinesForCheck[index].x, quarantinesForCheck[index].y, quarantinesForCheck[index].radius)) {\r\n\t\t\t\t\t\toverlap = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// if quarantine overlaps another and it was not overlapping previously - change texture\r\n\t\t\t\tif (overlap && !sprite.reactContext.state.quarantineOverlapping) {\r\n\t\t\t\t\tconst red = new PIXI.Graphics();\r\n\t\t\t\t\tred.beginFill(0xed1813, 0.35);\r\n\t\t\t\t\tred.drawCircle(0,0,sprite.radius);\r\n\t\t\t\t\tred.endFill();\r\n\t\t\t\t\tsprite.texture = red.generateCanvasTexture();\r\n\t\t\t\t\tsprite.alpha = 1;\r\n\t\t\t\t\ttextSprite.style.fill = 0xed1813; // set text\r\n\t\t\t\t\tsprite.reactContext.setState({ quarantineOverlapping: true });\r\n\t\t\t\t}// if quarantine was previously overlapping and it doesn't now - change state\r\n\t\t\t\telse if (!overlap && sprite.reactContext.state.quarantineOverlapping) {\r\n\t\t\t\t\tconst green = new PIXI.Graphics();\r\n\t\t\t\t\tgreen.beginFill(0x69b11c, 0.35);\r\n\t\t\t\t\tgreen.drawCircle(0,0,sprite.radius);\r\n\t\t\t\t\tgreen.endFill();\r\n\t\t\t\t\tsprite.texture = green.generateCanvasTexture();\r\n\t\t\t\t\tsprite.alpha = 1;\r\n\t\t\t\t\ttextSprite.style.fill = 0x69b11c; // set text\r\n\t\t\t\t\tsprite.reactContext.setState({ quarantineOverlapping: false });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// HIDE quarantine - when clock goes beyond duration (duration + dropTime)\r\n\t\telse if (sprite.dropTime && (sprite.reactContext.state.clockTime.getTime() - sprite.duration - sprite.dropTime) > 0) {\r\n\t\t\tconst textSprite = spriteArr[sprite.myID + quarantineObj.length] || {};\r\n\t\t\tsprite.x = -500 * textSprite.myID;\r\n\t\t\tsprite.y = -500 * textSprite.myID;\r\n\t\t\ttextSprite.x = -500;\r\n\t\t\ttextSprite.y = -500;\r\n\t\t\tsprite.dropTime = null;\r\n\t\t\ttextSprite.dropTime = null;\r\n\r\n\t\t\t// prepare values for next appearance\r\n\t\t\tconst green = new PIXI.Graphics();\r\n\t\t\tgreen.beginFill(0x69b11c, 0.35); // set future pick up color (green)\r\n\t\t\tgreen.drawCircle(0,0,sprite.radius);\r\n\t\t\tgreen.endFill();\r\n\t\t\tsprite.texture = green.generateCanvasTexture();\r\n\t\t\tsprite.alpha = 1;\r\n\t\t\tsprite.reactContext.setQuarantineNonactive(sprite.myID);\r\n\t\t\t// TEXT\r\n\t\t\t// this was done in a hurry (repeated in HomePage/helpers/game/startGame.js) - it is only called on quarantine termination\r\n\t\t\tconst difficultyTime = { 0: [15, 25], 1: [15, 20], 2: [10, 15] };\r\n\t\t\tconst difficulty = sprite.reactContext.state.gameSettings[\"difficulty\"];\r\n\t\t\tconst randomTimeInSeconds = Math.round(randomIntNumber(difficultyTime[difficulty][0]*1000, difficultyTime[difficulty][1]*1000) / 1000);\t// make duration a round seconds number\r\n\t\t\ttextSprite.duration = randomTimeInSeconds * 1000;\r\n\t\t\tsprite.duration = randomTimeInSeconds * 1000;\r\n\t\t\ttextSprite.text = `0:${randomTimeInSeconds < 10 ? \"0\" + randomTimeInSeconds + \"\" : randomTimeInSeconds}`;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// X BOUNDARIES\r\n\tif ((sprite.x + sprite.radius) > (window.innerWidth < sprite.reactContext.canvasWidth ? sprite.reactContext.canvasWidth : window.innerWidth )) {\r\n\t\tsprite.velocity.x = -sprite.velocity.x;\r\n\t}\r\n\tif ((sprite.x - sprite.radius) < 0) {\r\n\t\tsprite.velocity.x = -sprite.velocity.x;\r\n\t}\r\n\t// Y BOUNDARIES\r\n\tif ((sprite.y + sprite.radius) > (window.innerHeight < sprite.reactContext.canvasHeight ? sprite.reactContext.canvasHeight : window.innerHeight)) { // resize only up\r\n\t\tsprite.velocity.y = -sprite.velocity.y;\r\n\t}\r\n\tif ((sprite.y - sprite.radius) < 0) {\r\n\t\tsprite.velocity.y = -sprite.velocity.y;\r\n\t}\r\n\t/* CALCULATE DEACTIVATION TIME IF APPLIED - MAYBE WILL BE USED FOR PREVOIUS INFECTED - VIOLET\r\n\tif (sprite.reactContext.state.simulationSettings[\"deactivateAfter\"] > 0) {\r\n\t\tif (sprite.contagiousFrom && (sprite.reactContext.state.currentTime - sprite.contagiousFrom > sprite.reactContext.state.simulationSettings[\"deactivateAfter\"])) {\r\n\t\t\tsprite.contagion = 0;\r\n\t\t\tsprite.contagiousFrom = 0;\r\n\t\t\tsprite.texture = loader.resources.sheet.textures[\"ball-white-15.png\"];\r\n\t\t\tsprite.reactContext.setState(prevState => ({ contagious: prevState.contagious - 1, healthy: prevState.healthy + 1 }));\r\n\t\t}\r\n\t}*/\r\n\r\n\t// CALCULATE COLLISION DETECTION WITH QUARANTINE ONLY WHEN DROPPED - when draggedID changes this eval will be false!\r\n\tif (sprite.myID === sprite.reactContext.state.draggedQuarantine.id && !sprite.reactContext.state.quarantinePlaced) {\r\n\t\treturn;\r\n\t}\r\n\t// CALCULATE COLLISION DETECTION TO ALL OTHER IMAGES - substract Text objects!\r\n\tfor (let i = 0; i < spriteArr.length - quarantineObj.length; i++) {\r\n\t\t// don't calculate collisions for same objects\r\n\t\tif (sprite.myID === spriteArr[i].myID) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t// check if distance minus radia is less then 0 --> crash\r\n\t\tif (circleIntersect(sprite.x, sprite.y, sprite.radius, spriteArr[i].x, spriteArr[i].y, spriteArr[i].radius)) {\r\n\t\t\tconst otherSprite = spriteArr[i]\r\n\t\t\t// don't calculate contagion for quarantine particles (which have id > particle quantity)\r\n\t\t\tif (otherSprite.myID < sprite.reactContext.state.gameSettings.quantity && sprite.myID < sprite.reactContext.state.gameSettings.quantity) {\r\n\t\t\t\t// only calculating contagion transmission (one contagious, one healthy)\r\n\t\t\t\tif (otherSprite.contagion && !sprite.contagion) {\r\n\t\t\t\t\tconst d = Math.random();\r\n\t\t\t\t\tif (sprite.reactContext.state.gameSettings[\"difficulty\"] === 2) {\r\n\t\t\t\t\t\t// 100% chance of being here - hard difficulty\r\n\t\t\t\t\t\tgetContagion(sprite, loader);\r\n\t\t\t\t\t} else if (d < 0.5 && sprite.reactContext.state.gameSettings[\"difficulty\"] === 1) {\r\n\t\t\t\t\t\t// 50% chance of being here - medium\r\n\t\t\t\t\t\tgetContagion(sprite, loader);\r\n\t\t\t\t\t} else if (d < 0.67) {\r\n\t\t\t\t\t\t// 17% chance of being here\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 33% chance of being here - easy\r\n\t\t\t\t\t\tgetContagion(sprite, loader);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if (sprite.contagion && !otherSprite.contagion) {\r\n\t\t\t\t\tconst d = Math.random();\r\n\t\t\t\t\tif (sprite.reactContext.state.gameSettings[\"difficulty\"] === 2) {\r\n\t\t\t\t\t\t// 100% chance of being here - hard difficulty\r\n\t\t\t\t\t\tgetContagion(otherSprite, loader);\r\n\t\t\t\t\t} else if (d < 0.5 && sprite.reactContext.state.gameSettings[\"difficulty\"] === 1) {\r\n\t\t\t\t\t\t// 50% chance of being here - medium\r\n\t\t\t\t\t\tgetContagion(otherSprite, loader);\r\n\t\t\t\t\t} else if (d < 0.67) {\r\n\t\t\t\t\t\t// 17% chance of being here\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 33% chance of being here - easy\r\n\t\t\t\t\t\tgetContagion(otherSprite, loader);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresolveCollision(sprite, otherSprite, circleIntersect);\r\n\t\t}\r\n\t}\r\n\tsprite.x += sprite.velocity.x;\r\n\tsprite.y += sprite.velocity.y;\r\n}\r\n\r\nfunction getContagion(sprite, loader) {\r\n\tsprite.contagion = 1;\r\n\tsprite.reactContext.setState(prevState => ({ contagious: prevState.contagious + 1, healthy: prevState.healthy - 1 }));\r\n\tsprite.contagiousFrom = new Date().getTime();\r\n\tsprite.texture = loader.resources.sheet.textures[\"ball-red-15.png\"];\r\n\tconst gameSettings = sprite.reactContext.state.gameSettings || {};\r\n\r\n\t// GAME END\r\n\t// Open time - show stats and share dialog\r\n\tif (gameSettings[\"mode\"] === 0 && sprite.reactContext.state.healthy === 0) {\r\n\t\tsprite.reactContext.toggleGamePause();\r\n\t\tsprite.reactContext.gameEnded({ playerWin: true });\r\n\t\treturn;\r\n\t}\r\n\t// TIME CHALLENGE - if there is no more healthy balls and obviously time is not up (is beeing checked at the start of this function) - player looses\r\n\telse if (gameSettings[\"mode\"] === 1 && sprite.reactContext.state.healthy === 0) {\r\n\t\t// it is imperative to call these functions only once\r\n\t\tsprite.reactContext.toggleGamePause();\r\n\t\tsprite.reactContext.gameEnded({ playerWin: false });\r\n\t\treturn;\r\n\t}\r\n}\r\n\r\n/**\r\n * Rotates coordinate system for velocities\r\n *\r\n * Takes velocities and alters them as if the coordinate system they're on was rotated\r\n *\r\n * @param  Object | velocity | The velocity of an individual particle\r\n * @param  Float  | angle    | The angle of collision between two objects in radians\r\n * @return Object | The altered x and y velocities after the coordinate system has been rotated\r\n */\r\nfunction rotate(velocity, angle) {\r\n\tconst rotatedVelocities = {\r\n\t\tx: velocity.x * Math.cos(angle) - velocity.y * Math.sin(angle),\r\n\t\ty: velocity.x * Math.sin(angle) + velocity.y * Math.cos(angle)\r\n\t};\r\n\treturn rotatedVelocities;\r\n}\r\n\r\n/**\r\n * Swaps out two colliding particles' x and y velocities after running through\r\n * an elastic collision reaction equation\r\n *\r\n * @param  Object | particle      | A particle object with x and y coordinates, plus velocity\r\n * @param  Object | otherParticle | A particle object with x and y coordinates, plus velocity\r\n * @return Null | Does not return a value\r\n */\r\n\r\nfunction resolveCollision(particle, otherParticle, circleIntersect) {\r\n\tconst quantity = particle.reactContext.state.gameSettings.quantity;\r\n\tlet xVelocityDiff, yVelocityDiff, xDist, yDist;\r\n\r\n\txVelocityDiff = particle.velocity.x - otherParticle.velocity.x;\r\n\tyVelocityDiff = particle.velocity.y - otherParticle.velocity.y;\r\n\r\n\txDist = otherParticle.x - particle.x;\r\n\tyDist = otherParticle.y - particle.y;\r\n\r\n\r\n\r\n\t// Prevent accidental overlap of images - calculate only when objects are moving towards each other\r\n\tif (xVelocityDiff * xDist + yVelocityDiff * yDist > 0 && particle.myID < quantity && otherParticle.myID < quantity) {\r\n\t\t// Grab angle between the two colliding images\r\n\t\tconst angle = -Math.atan2(otherParticle.y - particle.y, otherParticle.x - particle.x);\r\n\r\n\t\t// Store mass in var for better readability in collision equation\r\n\t\t// const m1 = particle.mass;\r\n\t\t// const m2 = otherParticle.mass;\r\n\r\n\t\t// Velocity before equation\r\n\t\tconst u1 = rotate(particle.velocity, angle);\r\n\t\tconst u2 = rotate(otherParticle.velocity, angle);\r\n\r\n\t\t// Velocity after 1d collision equation\r\n\t\t// (mass) const v1 = { x: u1.x * (m1 - m2) / (m1 + m2) + u2.x * 2 * m2 / (m1 + m2), y: u1.y };\r\n\t\t// (mass) const v2 = { x: u2.x * (m1 - m2) / (m1 + m2) + u1.x * 2 * m2 / (m1 + m2), y: u2.y };\r\n\t\tconst v1 = { x: u2.x, y: u1.y };\r\n\t\tconst v2 = { x: u1.x, y: u2.y };\r\n\r\n\t\t// Final velocity after rotating axis back to original location\r\n\t\tconst vFinal1 = rotate(v1, -angle);\r\n\t\tconst vFinal2 = rotate(v2, -angle);\r\n\r\n\t\t// PRESERVE SPEED - calculate startSpeed and newSpeed ratio and apply it to particle x and y velocities\r\n\t\tconst particlePreservedSpeed = preserveSpeed(particle, vFinal1);\r\n\t\tconst otherParticlePreservedSpeed = preserveSpeed(otherParticle, vFinal2);\r\n\r\n\t\t// Swap particle velocities for realistic bounce effect\r\n\t\tparticle.velocity.x = particlePreservedSpeed.x;\r\n\t\tparticle.velocity.y = particlePreservedSpeed.y;\r\n\r\n\t\totherParticle.velocity.x = otherParticlePreservedSpeed.x;\r\n\t\totherParticle.velocity.y = otherParticlePreservedSpeed.y;\r\n\t}\t// QUARANTENE\r\n\telse if (particle.myID >= quantity){\r\n\t\tconst particleDistance = distance(particle.x, particle.y, otherParticle.x, otherParticle.y) - particle.radius + otherParticle.radius;\r\n\t\t// make a border > -2 for outside particles\r\n\t\tif (particleDistance > -3) {\r\n\t\t\t// X BOUNDARIES\r\n\t\t\t// RIGHT\r\n\t\t\tif ((particle.x + particle.radius/4) <= otherParticle.x - otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.x = otherParticle.velocity.x > 0 ? otherParticle.velocity.x : -otherParticle.velocity.x;\r\n\t\t\t}\r\n\t\t\t// LEFT\r\n\t\t\tif ((particle.x - particle.radius/4) >= otherParticle.x + otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.x = otherParticle.velocity.x < 0 ? otherParticle.velocity.x : -otherParticle.velocity.x;\r\n\t\t\t}\r\n\t\t\t// Y BOUNDARIES\r\n\t\t\t// UP\r\n\t\t\tif ((particle.y + particle.radius/4) <= otherParticle.y - otherParticle.radius) { // resize only up\r\n\t\t\t\totherParticle.velocity.y = otherParticle.velocity.y > 0 ? otherParticle.velocity.y : -otherParticle.velocity.y;\r\n\t\t\t}\r\n\t\t\t// DOWN\r\n\t\t\tif ((particle.y - particle.radius/4) >= otherParticle.y + otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.y = otherParticle.velocity.y < 0 ? otherParticle.velocity.y : -otherParticle.velocity.y;\r\n\t\t\t}\r\n\t\t\tparticle.velocity.x = 0;\r\n\t\t\tparticle.velocity.y = 0;\r\n\t\t}\r\n\t\t// border < -2 for inside particles (so inside / outside don+t touch!)\r\n\t\tif (particleDistance > -10 && particleDistance < -5) {\r\n\t\t\t// RIGHT\r\n\t\t\tif ((particle.x + particle.radius/4) <= otherParticle.x - otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.x = otherParticle.velocity.x > 0 ? -otherParticle.velocity.x : otherParticle.velocity.x;\r\n\t\t\t}\r\n\t\t\t// LEFT\r\n\t\t\tif ((particle.x - particle.radius/4) >= otherParticle.x + otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.x = otherParticle.velocity.x < 0 ? -otherParticle.velocity.x : otherParticle.velocity.x;\r\n\t\t\t}\r\n\t\t\t// Y BOUNDARIES\r\n\t\t\t// UP\r\n\t\t\tif ((particle.y + particle.radius/4) <= otherParticle.y - otherParticle.radius) { // resize only up\r\n\t\t\t\totherParticle.velocity.y = otherParticle.velocity.y > 0 ? -otherParticle.velocity.y : otherParticle.velocity.y;\r\n\t\t\t}\r\n\t\t\t// DOWN\r\n\t\t\tif ((particle.y - particle.radius/4) >= otherParticle.y + otherParticle.radius) {\r\n\t\t\t\totherParticle.velocity.y = otherParticle.velocity.y < 0 ? -otherParticle.velocity.y : otherParticle.velocity.y;\r\n\t\t\t}\r\n\t\t\tparticle.velocity.x = 0;\r\n\t\t\tparticle.velocity.y = 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction preserveSpeed(particle, vFinal) {\r\n\t// calculate hypothenuse of the new speed\r\n\tconst newSpeed = Math.sqrt(vFinal.x * vFinal.x + vFinal.y * vFinal.y);\r\n\t// and compare it to the old speed hypothenuse and shorten / prolong x & y with calculated ratio\r\n\treturn {\r\n\t\tx: vFinal.x * particle.startSpeed / newSpeed,\r\n\t\ty: vFinal.y * particle.startSpeed / newSpeed\r\n\t}\r\n}\r\nfunction distance(x1, y1, x2, y2) {\r\n\tconst xDist = x2 - x1;\r\n\tconst yDist = y2 - y1;\r\n\treturn Math.sqrt(xDist * xDist + yDist * yDist);\r\n}\r\nfunction quarantineCollision(particle, otherParticle) {\r\n\tconst angle = -Math.atan2(otherParticle.y - particle.y, otherParticle.x -particle.x);\r\n\r\n\t// Store mass in var for better readability in collision equation\r\n\t// const m1 = particle.mass;\r\n\t// const m2 = otherParticle.mass;\r\n\r\n\t// Velocity before equation\r\n\tconst u2 = rotate(otherParticle.velocity, angle);\r\n\r\n\t// Velocity after 1d collision equation\r\n\tconst v2 = { x: 0, y: u2.y };\r\n\r\n\t// Final velocity after rotating axis back to original location\r\n\tconst vFinal2 = rotate(v2, -angle);\r\n\r\n\t// PRESERVE SPEED - calculate startSpeed and newSpeed ratio and apply it to particle x and y velocities\r\n\tconst otherParticlePreservedSpeed = preserveSpeed(otherParticle, vFinal2);\r\n\r\n\t//\r\n\totherParticle.velocity.x = -otherParticlePreservedSpeed.x;\r\n\totherParticle.velocity.y = -otherParticlePreservedSpeed.y;\r\n}","import { updateGame } from \"./updateGame\";\r\nimport * as PIXI from \"pixi.js-legacy\";\r\n\r\nexport function startGame(autostart, gameSettings = null) {\r\n\tthis.autostart = autostart || false;\r\n\t// UTILITIES\r\n\r\n\tthis.gameApp = new PIXI.Application({\r\n\t\twidth: this.canvasWidth,\r\n\t\theight: this.canvasHeight,\r\n\t\tresolution: window.devicePixelRatio || 1,\r\n\t\tautoDensity: true,\r\n\t\tsharedLoader: true\r\n\t});\r\n\tdocument.getElementById(\"canvas-container\").appendChild(this.gameApp.view);\r\n\r\n\tif (this.gameApp.loader.resources.sheet == null) {\r\n\t\tthis.gameApp.loader\r\n\t\t\t.add(\"sheet\", \"balls.json\")\r\n\t\t\t.on(\"progress\", (loader, resource) => console.log(loader.progress + \"% loaded\"))\r\n\t\t\t.on(\"load\", (loader, resource) => console.log(\"Asset loaded\" + resource.name))\r\n\t\t\t.on(\"error\", err => console.error(\"load error\", err))\r\n\t\t\t.load(handleOnImageLoaded.bind(this, gameSettings));\r\n\t} else {\r\n\t\tthis.gameApp.loader.load(handleOnImageLoaded.bind(this, gameSettings));\r\n\t}\r\n\t// Resize function window\r\n\tconst resize = (e) => {\r\n\t\tif (this.gameApp) {\r\n\t\t\t// Resize the renderer\r\n\t\t\tthis.gameApp.renderer.resize(window.innerWidth < this.canvasWidth ? this.canvasWidth : window.innerWidth,\r\n\t\t\t\t\t\t\t\twindow.innerHeight < this.canvasHeight ? this.canvasHeight : window.innerHeight);\r\n\t\t}\r\n\t// You can use the 'screen' property as the renderer visible\r\n\t// area, this is more useful than view.width/height because\r\n\t// it handles resolution\r\n\t//rect.position.set(app.screen.width, app.screen.height);\r\n\t}\r\n\t// Listen for window resize events\r\n\twindow.addEventListener('resize', resize);\r\n}\r\n\r\nfunction randomIntNumber(min, max) {\r\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\n/**\r\n * Intersection calculation. Multiplication is much faster than getting the square root with Math.sqrt(), so distance is calculated without getting the root\r\n * and the sum of the radii is multiplied by itself. The outcome stays the same, but the performance is better.\r\n * @param {Float} x1\r\n * @param {Float} y1\r\n * @param {Int}   r1\r\n * @param {Float} x2\r\n * @param {Float} y2\r\n * @param {Int}\t  r2\r\n */\r\nfunction circleIntersect(x1, y1, r1, x2, y2, r2) {\r\n\r\n    // Calculate the distance between the two circles\r\n    var squareDistance = (x1-x2)*(x1-x2) + (y1-y2)*(y1-y2);\r\n\r\n    // When the distance is smaller or equal to the sum\r\n    // of the two radius, the circles touch or overlap\r\n    return squareDistance <= ((r1 + r2) * (r1 + r2))\r\n}\r\n\r\nfunction handleOnImageLoaded(gameSettings) {\r\n\tconst {\r\n\t\tsize: radius,\r\n\t\tspeed,\r\n\t\tquantity,\r\n\t\tdifficulty,\r\n\t\tnrOfQuarantines\r\n\t} = gameSettings == null ? this.state.gameSettings : gameSettings;\r\n\r\n\r\n\tconst quarantineArr = [];\r\n\tconst timeTextArr = [];\r\n\tconst difficultyTime = { 0: [15, 25], 1: [15, 20], 2: [60, 70] };\r\n\t// TEXT & QUARANTINES\r\n\tfor (let index = 0; index < nrOfQuarantines; index++) {\r\n\t\tconst randomTimeInSeconds = Math.round(randomIntNumber(difficultyTime[difficulty][0]*1000, difficultyTime[difficulty][1]*1000) / 1000);\t// make duration a round seconds number\r\n\t\t// TEXT\r\n\t\tconst formattedTime = `0:${randomTimeInSeconds < 10 ? \"0\" + randomTimeInSeconds + \"\" : randomTimeInSeconds}`;\r\n\t\tconst timeText = new PIXI.Text(formattedTime, {\r\n\t\t\tfill: 0x69b11c,\r\n\t\t\tfontSize: \"21px\",\r\n\t\t\tfontFamily : \"Roboto Condensed\"\r\n\t\t});\r\n\t\ttimeText.alpha = 1;\r\n\t\ttimeText.text = formattedTime;\r\n\t\ttimeText.isTextSprite = true;\r\n\t\ttimeText.anchor.set(0.5, 0);\r\n\t\ttimeText.x = -500;\r\n\t\ttimeText.y = -500;\r\n\t\ttimeText.duration = randomTimeInSeconds * 1000;\r\n\t\ttimeText.dropTime = null;\r\n\t\ttimeText.reactContext = this;\r\n\t\ttimeText.myID = quantity + nrOfQuarantines + index; // text index (calulate existing quarantines)\r\n\r\n\t\t// QUARANTINES\r\n\t\tconst width = this.state.draggedQuarantine[\"size\"];\r\n\t\tconst height = width;\r\n\t\tconst radius = width / 2;\r\n\r\n\t\tconst green = new PIXI.Graphics();\r\n\t\tgreen.beginFill(0x69b11c, 0.7);\r\n\t\tgreen.drawCircle(0,0,radius);\r\n\t\tgreen.endFill();\r\n\t\tconst greenTexture = green.generateCanvasTexture();\r\n\r\n\t\tconst particleID = quantity + index;\r\n\t\tconst quarantine = new PIXI.Sprite(greenTexture);\r\n\t\tquarantine.alpha = 1;\r\n\t\tquarantine.x = -500 * (index+1); // so quarantines don't crash all the time in each other\r\n\t\tquarantine.y = -500 * (index+1); // so quarantines don't crash all the time in each other\r\n\t\tquarantine.alpha = .5;\r\n\t\tquarantine.duration = randomTimeInSeconds * 1000;\r\n\t\tquarantine.width = width;\r\n\t\tquarantine.height = height;\r\n\t\tquarantine.anchor.x = .5;\r\n\t\tquarantine.anchor.y = .5;\r\n\t\tquarantine.radius = radius;\r\n\t\tquarantine.reactContext = this;\r\n\t\tquarantine.contagion = 0;\r\n\t\tquarantine.contagiousFrom = null;\r\n\t\tquarantine.velocity = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t};\r\n\t\tquarantine.startSpeed = 0;\r\n\t\t// events\r\n\t\tquarantine.myID = particleID;\r\n\t\tquarantine.isQuarantineSprite = true;\r\n\t\tquarantine.isActive = false;\r\n\t\tquarantine.isDragged = false;\r\n\t\tquarantine.isBeingDropped = false;\r\n\t\tquarantine.dropTime = null;\r\n\r\n\r\n\r\n\r\n\r\n\t\t// push each object to its own array\r\n\t\tquarantineArr.push(quarantine);\r\n\t\ttimeTextArr.push(timeText);\r\n\t}\r\n\r\n\t// PARTICLES\r\n\tlet contagion, sprite;\r\n\tconst spriteArr = [];\r\n\tconst nrImages = +quantity;\r\n\tconst maxWidth = this.canvasWidth - radius * 2.5;\r\n\tconst maxHeight = this.canvasHeight - radius * 2.5;\r\n\tconst whiteBall = this.gameApp.loader.resources.sheet.textures[\"ball-white-15.png\"];\r\n\tconst redBall = this.gameApp.loader.resources.sheet.textures[\"ball-red-15.png\"];\r\n\r\n\tfor (let i = 0; i < nrImages; i++) {\r\n\r\n\t\tcontagion = i === 0 ? 1 : 0;\r\n\t\tlet tries = 0;\r\n\t\tlet x = randomIntNumber(radius * 2, maxWidth);\r\n\t\tlet y = randomIntNumber(radius * 2, maxHeight);\r\n\t\tif (i !== 0) {\r\n\t\t\tfor (let j = 0; j < spriteArr.length; j++) {\r\n\t\t\t\tif (tries > 1000000) {\r\n\t\t\t\t\tbreak; // if the screen is too small, it will go forever - so break and have none and notify user\r\n\t\t\t\t}\r\n\t\t\t\tif (circleIntersect(x, y, radius, spriteArr[j].x, spriteArr[j].y, spriteArr[j].radius)) {\r\n\t\t\t\t\tx = randomIntNumber(radius * 2, maxWidth);\r\n\t\t\t\t\ty = randomIntNumber(radius * 2, maxHeight);\r\n\t\t\t\t\t// set new x, y recursively\r\n\t\t\t\t\tj = -1;\r\n\t\t\t\t\ttries++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (contagion) {\r\n\t\t\tsprite = new PIXI.Sprite(redBall);\r\n\t\t} else {\r\n\t\t\tsprite = new PIXI.Sprite(whiteBall);\r\n\t\t}\r\n\t\tsprite.x = x;\r\n\t\tsprite.y = y;\r\n\t\tsprite.isParticleSprite = true;\r\n\t\tsprite.width = radius * 2;\r\n\t\tsprite.height = radius * 2;\r\n\t\tsprite.anchor.x = .5;\r\n\t\tsprite.anchor.y = .5;\r\n\t\tsprite.myID = i;\r\n\t\tsprite.radius = radius;\r\n\t\tsprite.reactContext = this;\r\n\t\tsprite.contagion = contagion;\r\n\t\tsprite.contagiousFrom = 0;\r\n\t\tconst randomX = Math.random() - .5;\r\n\t\tconst randomY = Math.random() - .5;\r\n\t\tsprite.velocity = {\r\n\t\t\tx: randomX < 0  && randomX > -.3 ? (randomX*speed) - speed : (randomX > 0  && randomX < .3 ? (randomX) + speed : randomX * speed),\r\n\t\t\ty: randomY < 0  && randomY > -.3 ? (randomY*speed) - speed : (randomY > 0  && randomY < .3 ? (randomY) + speed : randomY * speed),\r\n\t\t};\r\n\r\n\t\t// calculate starting speed (hypothenuse from x, y) - optimised (without Math.pow() func)\r\n\t\tsprite.startSpeed = Math.sqrt(sprite.velocity.x * sprite.velocity.x + sprite.velocity.y * sprite.velocity.y);\r\n\t\tspriteArr.push(sprite);\r\n\t}\r\n\r\n\tquarantineArr.forEach(item => spriteArr.push(item));\r\n\ttimeTextArr.forEach(item => spriteArr.push(item));\r\n\r\n\t// construct quarantine and text object\r\n\tconst quarantineObj = quarantineArr.reduce((acc, obj) => Object.assign(acc, {[obj.myID]: obj}), {length: quarantineArr.length})\r\n\r\n\tthis.setState({ availableQuarantines: quarantineArr.map(item => item.myID)});\r\n\tconst len = spriteArr.length;\r\n\t// draw and animate\r\n\tif (this.autostart) {\r\n\t\tfor (let spriteIndex = 0; spriteIndex < len; spriteIndex++) {\r\n\t\t\tthis.gameApp.stage.addChild(spriteArr[spriteIndex]);\r\n\t\t\tthis.gameApp.ticker.add(updateGame.bind(null, spriteArr[spriteIndex], spriteArr, quarantineArr, quarantineObj, circleIntersect, this.gameApp.loader, randomIntNumber));\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let spriteIndex = 0; spriteIndex < len; spriteIndex++) {\r\n\t\t\tthis.gameApp.stage.addChild(spriteArr[spriteIndex]);\r\n\t\t\tthis.gameApp.ticker.addOnce(updateGame.bind(null, spriteArr[spriteIndex], spriteArr, quarantineArr, quarantineObj, circleIntersect, this.gameApp.loader, randomIntNumber));\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","export function pause() {\r\n\tif (this.simulationApp) {\r\n\t\treturn this.simulationApp.ticker.stop();\r\n\t}\r\n\telse if (this.gameApp) {\r\n\t\treturn this.gameApp.ticker.stop();\r\n\r\n\t}\r\n};\r\n\r\nexport function unPause() {\r\n\tif (this.simulationApp) {\r\n\t\treturn this.simulationApp.ticker.start();\r\n\t}\r\n\telse if (this.gameApp) {\r\n\t\treturn this.gameApp.ticker.start();\r\n\t}\r\n};\r\n\r\nexport function stop() {\r\n\tif (this.simulationApp) {\r\n\t\t// https://pixijs.download/dev/docs/PIXI.Application.html#destroy\r\n\t\t// (everything should be destroyed when not needed > garbage collector)\r\n\t\t// removes children, but leaves canvas element\r\n\t\tthis.simulationApp.destroy(true);\r\n\t\tthis.simulationApp = null;\r\n\t}\r\n\telse if (this.gameApp) {\r\n\t\t// https://pixijs.download/dev/docs/PIXI.Application.html#destroy\r\n\t\t// (everything should be destroyed when not needed > garbage collector)\r\n\t\t// removes children, but leaves canvas element\r\n\t\tthis.gameApp.destroy(true);\r\n\t\tthis.gameApp = null;\r\n\t}\r\n};\r\n\r\nexport { startSimulation } from \"./simulation/startSimulation\";\r\nexport { startGame } from \"./game/startGame\";","export const sizeOptions = [\r\n\t{ type: \"Small\", value: 5 },\r\n\t\"|\",\r\n\t{ type: \"Medium\", value: 8 },\r\n\t\"|\",\r\n\t{ type: \"Large\", value: 10 },\r\n];\r\nexport const quantityValues = {\r\n\t\"5\": [ 100, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500, \"|\", 700, \"|\", 800, \"|\", 1000 ],\r\n\t8: [ 100, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500, \"|\", 600, \"|\", 700, \"|\", 800 ],\r\n\t\"10\": [  50, \"|\", 100,\"|\", 150, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500 ]\r\n};\r\nexport const speedOptions = [\r\n\t{ type: \"Slow\", value: .3 },\r\n\t\"|\",\r\n\t{ type: \"Medium\", value: .6 },\r\n\t\"|\",\r\n\t{ type: \"Fast\", value: 1 },\r\n];\r\nexport const deactivateOptions = [\r\n\t0,\r\n\t\"|\",\r\n\t10000,\r\n\t\"|\",\r\n\t15000,\r\n\t\"|\",\r\n\t20000,\r\n\t\"|\",\r\n\t30000,\r\n\t\"|\",\r\n\t45000,\r\n\t\"|\",\r\n\t60000\r\n];\r\nexport const booleanOptions = [\r\n\t{ type: \"yes\", value: true },\r\n\t\"|\",\r\n\t{ type: \"no\", value: false }\r\n];","import React from \"react\";\r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter,\r\n\t\tContainer, Nav, NavLink } from \"reactstrap\";\r\n\r\nimport { sizeOptions, quantityValues, speedOptions, deactivateOptions, booleanOptions } from \"./simulationOptions\";\r\nimport \"./simulationDialog.scss\";\r\n\r\nexport class SimulationDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t// starightforward - in case simulation is active, this component should not update\r\n\t\tif (!nextProps.isSimulationActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.props.isOpen !== nextProps.isOpen || this.props.buttonText !== nextProps.buttonText) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.props.settings[\"size\"] !== nextProps.settings[\"size\"] ||\r\n\t\t\tthis.props.settings[\"speed\"] !== nextProps.settings[\"speed\"] ||\r\n\t\t\tthis.props.settings[\"quantity\"] !== nextProps.settings[\"quantity\"] ||\r\n\t\t\tthis.props.settings[\"deactivateAfter\"] !== nextProps.settings[\"deactivateAfter\"] ||\r\n\t\t\tthis.props.settings[\"showTime\"] !== nextProps.settings[\"showTime\"] ||\r\n\t\t\tthis.props.settings[\"showStats\"] !== nextProps.settings[\"showStats\"] ||\r\n\t\t\tthis.props.settings[\"autorestart\"] !== nextProps.settings[\"autorestart\"]\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t// in case simulation is active, this component should not trigger update\r\n\t\tif (!this.props.isSimulationActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst minQuantity = quantityValues[this.props.settings.size][0] || 0;\r\n\t\tconst maxQuantity = quantityValues[this.props.settings.size].slice(-1)[0] || 1000;\r\n\t\t// if quantity is greater or smaller than it should be according to size\r\n\t\tif (this.props.settings.quantity > maxQuantity ) {\r\n\t\t\treturn this.props.setSimulationSettings({ quantity: maxQuantity });\r\n\t\t}\r\n\t\tif (this.props.settings.quantity < minQuantity ) {\r\n\t\t\treturn this.props.setSimulationSettings({ quantity: minQuantity });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tconst { isOpen, toggle, startSimulation, buttonText, setSimulationSettings, isSimulationStopped,\r\n\t\t\t\t\tsettings: { size, speed, quantity, deactivateAfter, showTime, showStats, autorestart} } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Modal key=\"simulator\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"simulator-modal\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>SIMULATION SETTINGS</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Size of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{sizeOptions.map((sizeOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof sizeOption != \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{sizeOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({size: sizeOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={sizeOption.value === size}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{sizeOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Number of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{quantityValues[size].map((quantityValue, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (quantityValue === \"|\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{quantityValue}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({quantity: quantityValue})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={quantityValue === quantity}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{quantityValue}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Speed of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{speedOptions.map((speedOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof speedOption != \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{speedOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({speed: speedOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={speedOption.value === speed}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{speedOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Deactivate ball after</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{deactivateOptions.map((deactivateOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (deactivateOption === \"|\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{deactivateOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({deactivateAfter: deactivateOption})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={deactivateOption === deactivateAfter}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{deactivateOption === 0 ? \"no\" : `${deactivateOption/1000}s`}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row className=\"flexContainer d-flex justify-content-center\">\r\n\t\t\t\t\t\t<Container className=\"col-4 choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Show time</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{booleanOptions.map((timeOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof timeOption !== \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{timeOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({showTime: timeOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={timeOption.value === showTime}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{timeOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t<Container className=\"col-4 choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Show stats</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{booleanOptions.map((statOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof statOption !== \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{statOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({showStats: statOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={statOption.value === showStats}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{statOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t<Container className=\"col-4 choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Autorestart</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{booleanOptions.map((restartOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof restartOption !== \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{restartOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({autorestart: restartOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setSimulationSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={restartOption.value === autorestart}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{restartOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter onClick={startSimulation} className=\"simulator-modal__footer\">\r\n\t\t\t\t{isSimulationStopped ? \">>>\" : \"\"}&nbsp;&nbsp; {buttonText} &nbsp;&nbsp;{isSimulationStopped ? \"<<<\" : \"\"}\r\n\t\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)};\r\n};\r\n","import React, { useState } from 'react'\r\nimport { Button, Navbar, Nav, NavbarToggler,\r\n\tCollapse, NavItem, NavLink, NavbarText } from \"reactstrap\";\r\n\r\nimport \"./navbar.scss\";\r\n\r\nexport const NavBar = props => {\r\n\tconst { onMouseMove, toggleNavbarItemsExpand, isNavbarExpanded, toggleNavbarVisibility, isNavbarVisible, contagious, toggleStaySafeDialog,\r\n\t\thealthy, isGameActive, gamePaused, toggleSimulationDialog, toggleShareDialog, toggleGameDialog, toggleAboutDialog, clockTime, \r\n\t\tsimulationSettings: { showTime, showStats }, gameSettings: { delayInSeconds, mode, difficulty }, gameEnded } = props;\r\n\r\n\t// count in the in-game start delay\r\n\tlet formattedSeconds, seconds, minutes;\r\n\tconst currentSeconds = clockTime.getSeconds();\r\n\tconst shouldCountdownBeVisible = clockTime.getTime() < 4000;\r\n\r\n\t// OPEN TIME - countup mode\r\n\tconst delayedSeconds = (clockTime.getTime() / 1000) - delayInSeconds;\r\n\tif (isGameActive && mode === 0) {\r\n\t\tminutes = delayedSeconds < 4 ? \"0\" : new Date(clockTime.getTime() - delayInSeconds*1000).getMinutes();\r\n\t\tseconds = delayedSeconds % 60;\r\n\t\tformattedSeconds = seconds < 0 ? \"00\" : seconds < 10 ? \"0\" + seconds : seconds;\r\n\t} \r\n\t// TIME CHALLENGE - countdown mode\r\n\telse if (isGameActive && mode === 1) {\r\n\t\tconst positiveSeconds = delayedSeconds < 0 ? 0 : delayedSeconds;\r\n\t\tconst coundownTime = new Date((300 - positiveSeconds) * 1000);\r\n\t\tminutes = coundownTime.getMinutes();\r\n\t\tseconds = coundownTime.getSeconds();\r\n\t\tformattedSeconds = seconds < 0 ? \"00\" : seconds < 10 ? \"0\" + seconds : seconds;\r\n\t\tif (gameEnded) {\r\n\t\t\tminutes = \"0\";\r\n\t\t\tformattedSeconds = \"00\";\r\n\t\t}\r\n\t} else {\r\n\t\tminutes = clockTime.getMinutes();\r\n\t\tseconds = currentSeconds;\r\n\t\tformattedSeconds = seconds < 10 ? \"0\" + seconds : seconds;\r\n\t}\r\n\r\n\t// start countdown on game start\r\n\tconst gameStartCountdownTime = (delayedSeconds < 0) ? (-delayedSeconds) : \"\";\r\n\treturn(\r\n\t\t<>\r\n\t\t<Navbar onMouseMove={onMouseMove} dark className={`main__navbar ${!isNavbarVisible && \"hidden\"} d-inline-flex justify-content-between`} >\r\n\t\t\t<Navbar dark className=\"col-6 main__navbar__left d-inline-flex justify-content-between\" expand=\"sm\">\r\n\t\t\t\t<NavbarToggler onClick={toggleNavbarItemsExpand} />\r\n\t\t\t\t<Collapse isOpen={isNavbarExpanded} navbar>\r\n\t\t\t\t<Nav className=\"navbar__nav left\" navbar>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"navbar__nav__link\" onClick={toggleSimulationDialog}>Simulate</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"d-none d-sm-block disabled stick\">|</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink data=\"game\" className=\"navbar__nav__link\" onClick={toggleGameDialog}>Play game</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"d-none d-sm-block disabled stick\">|</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink data=\"game\" className=\"navbar__nav__link\" onClick={toggleStaySafeDialog}>Stay Safe</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"d-none d-sm-block disabled stick\">|</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"navbar__nav__link\" onClick={toggleShareDialog}>Share</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"d-none d-sm-block disabled stick\">|</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"navbar__nav__link\" onClick={toggleAboutDialog}>About</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"d-none d-sm-block disabled stick\">|</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t<NavLink className=\"navbar__nav__link\" onClick={toggleNavbarVisibility}>Hide</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem className=\"navbar__nav__link caption\">\r\n\t\t\t\t\t\t<div className=\"bold\">ViralBalls</div>\r\n\t\t\t\t\t\t<div className=\"ordinary\">{isGameActive ? \"Game\" : \"Simulator\"}</div>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t</Nav>\r\n\t\t\t\t</Collapse>\r\n\t\t\t</Navbar>\r\n\t\t\t<Navbar dark className=\"col-6 main__navbar__right d-inline-flex justify-content-end\" >\r\n\t\t\t\t<Nav className=\"navbar__nav right\" navbar>\r\n\t\t\t\t\t<NavItem className=\"d-inline-flex justify-content-between\">\r\n\t\t\t\t\t\t<NavbarText className=\"countdown-link\">Stay safe. For more visit&nbsp;</NavbarText>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"countdown-link\"\r\n\t\t\t\t\t\t\thref=\"https://www.countdownkings.com/\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"nooperner noreferrer\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCountdownKings.com\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t<NavItem className={`stats ${!isNavbarVisible ? \"drop\" : \"\"}`}>\r\n\t\t\t\t\t\t<NavbarText className=\"stats__infected\">{showStats ? `Infected: ${contagious}` : \"\"}</NavbarText>\r\n\t\t\t\t\t\t<NavbarText className=\"stats__healthy\">{showStats ? `Healthy: ${healthy}` : \"\"}</NavbarText>\r\n\t\t\t\t\t\t<NavbarText className=\"stats__timer\">{showTime ? `${minutes}:${formattedSeconds}` : \"\"}</NavbarText>\r\n\t\t\t\t\t</NavItem>\r\n\t\t\t\t</Nav>\r\n\t\t\t</Navbar>\r\n\t\t\t<div className={`game-start-countdown ${isGameActive && !gamePaused && shouldCountdownBeVisible ? \"visible\" : \"\"}`}>{gameStartCountdownTime}</div>\r\n\t\t</Navbar>\r\n\t\t<Button\r\n\t\t\t\tclassName={`main__navbar__toggler ${isNavbarVisible && \"hidden\"}`}\r\n\t\t\t\tonClick={toggleNavbarVisibility}\r\n\t\t\t\tdisabled={isNavbarVisible}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img src=\"dropdown-arrow.svg\" alt=\"hide/unhide navbar\"></img>\r\n\t\t</Button>\r\n\t</>\r\n\t);\r\n};","import React, { useState } from \"react\";   \r\nimport { Button, Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer, NavLink } from \"reactstrap\";\r\n\r\nimport \"./shareDialog.scss\";\r\n\r\nexport class ShareDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\t\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.isOpen !== this.props.isOpen || nextProps.isCopied !== this.props.isCopied) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\t\r\n\t\tconst { isOpen, toggle, copy, isCopied  } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Modal key=\"sharemodal\" isOpen={isOpen} zIndex={isOpen ? 1000: -1} toggle={toggle} centered={true} className=\"share-modal\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}></ModalHeader>\r\n\t\t\t\t<ModalBody className=\"justify-content-center\">\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"share\">\r\n\t\t\t\t\t\t\tShare with your friends\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container>\r\n\t\t\t\t\t\t\thttps://www.viralballs.com\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container>\r\n\t\t\t\t\t\t\t{ isCopied ?\r\n\t\t\t\t\t\t\t\t<div className=\"copied__link\">Link copied <span role=\"img\" aria-label=\"smiley face\">&#128515;</span></div> \r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<Button onClick={copy} >Copy link</Button>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t<Container  className=\"col-12 d-inline-flex justify-content-center\">\r\n\t\t\t\t\t\tFor more visit&nbsp;\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName=\"footer__link\"\r\n\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\thref=\"https://www.countdownkings.com/\">\r\n\t\t\t\t\t\t\t\tCountdownKings.com\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</ModalFooter>\r\n\t\t\t</Modal>\r\n\t);}\r\n};\r\n","export const modeOptions = [\r\n\t{ type: \"Open Time\", value: 0 },\r\n\t\"|\",\r\n\t{ type: \"Time Challenge\", value: 1 }\r\n];\r\nexport const difficultyOptions = [\r\n\t{ type: \"Easy\", value: 0 },\r\n\t\"|\",\r\n\t{ type: \"Medium\", value: 1 },\r\n\t\"|\",\r\n\t{ type: \"Hard\", value: 2 },\r\n];\r\nexport const sizeOptions = [\r\n\t{ type: \"Small\", value: 5 },\r\n\t\"|\",\r\n\t{ type: \"Medium\", value: 8 },\r\n\t\"|\",\r\n\t{ type: \"Large\", value: 10 },\r\n];\r\n// depend on size and difficulty: easy: 0, medium: 1, hard: 2\r\nexport const quantityValues = {\r\n\t\"5\": [ 100, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500, \"|\", 700, \"|\", 800, \"|\", 1000 ],\r\n\t8: [ 100, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500, \"|\", 600, \"|\", 700, \"|\", 800 ],\r\n\t\"10\": [  50, \"|\", 100,\"|\", 150, \"|\", 200, \"|\", 300, \"|\", 400, \"|\", 500, \"|\", 600 ]\r\n};\r\nexport const quantityDiffVals = {\r\n\t0: {\r\n\t\t\"5\": { min: 100, max: 1000},\r\n\t\t8: { min: 100, max: 800},\r\n\t\t\"10\": { min: 50, max: 600},\r\n\t},\r\n\t1: {\r\n\t\t\"5\": { min: 300, max: 1000},\r\n\t\t8: { min: 300, max: 800},\r\n\t\t\"10\": { min: 150, max: 600},\r\n\t},\r\n\t2: {\r\n\t\t\"5\": { min: 700, max: 1000},\r\n\t\t8: { min: 600, max: 800},\r\n\t\t\"10\": { min: 300, max: 600},}\r\n}\r\n// depends on difficulty\r\nexport const speedOptions = [\r\n\t{ type: \"Slow\", value: 0.3, difficulty: 0 },\r\n\t\"|\",\r\n\t{ type: \"Medium\", value: .6, difficulty: 1 },\r\n\t\"|\",\r\n\t{ type: \"Fast\", value: 1, difficulty: 2 }\r\n];\r\n\r\nexport const speedDiffValues = {\r\n\t0: .3,\r\n\t1: .6,\r\n\t2: 1\r\n}\r\n\r\nexport const speedToString = {\r\n\t0.3: \"slow\",\r\n\t0.6: \"medium\",\r\n\t1: \"fast\"\r\n}\r\nexport const sizeToString = {\r\n\t5: \"small\",\r\n\t8: \"medium\",\r\n\t10: \"large\"\r\n}","export default {\r\n\t0: [\r\n\t\t\"1. Keep balls uninfected for as long as posiible.\",\r\n\t\t\"2. Use random quarantine to your advantage.\",\r\n\t\t\"3. Share the result and challenge your friends.\"\r\n\t],\r\n\t1: [\r\n\t\t\"1. Keep at least 3 balls uninfected for 5 minutes\",\r\n\t\t\"2. Use random quarantine to your advantage.\",\r\n\t\t\"3. Share the result and challenge your friends\"\r\n\t]\r\n}\r\n","import React from \"react\";\r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter,\r\n\t\tContainer, Nav, NavLink } from \"reactstrap\";\r\n\r\nimport { modeOptions, difficultyOptions, sizeOptions, quantityValues, quantityDiffVals, speedOptions, speedDiffValues } from \"./gameOptions\";\r\nimport { InstructionsPopover } from \"./instructionsPopover\";\r\nimport \"./gameDialog.scss\";\r\n\r\nexport class GameDialog extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tinstructionsOpen: false,\r\n\t\t\tmode: null,\r\n\t\t\tmodeType: null\r\n\t\t};\r\n\t\tthis.onMouseEnterInstructions = this.onMouseEnterInstructions.bind(this);\r\n\t\tthis.onMouseLeaveInstructions = this.onMouseLeaveInstructions.bind(this);\r\n\t}\r\n\r\n\tonMouseEnterInstructions(e) {\r\n\t\tconst mode = JSON.parse(e.currentTarget.getAttribute(\"data-option\"));\r\n\t\tconst modeType = e.currentTarget.getAttribute(\"data-type\");\r\n\t\tthis.setState({ instructionsOpen: true, mode, modeType });\r\n\t}\r\n\tonMouseLeaveInstructions(e) {\r\n\t\tconst mode = JSON.parse(e.currentTarget.getAttribute(\"data-option\"));\r\n\t\tconst modeType = e.currentTarget.getAttribute(\"data-type\");\r\n\t\tthis.setState({ instructionsOpen: false, mode, modeType });\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t// starightforward - in case simulation is active, this component should not update\r\n\t\tif (!nextProps.isGameActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.props.isOpen !== nextProps.isOpen || this.props.buttonText !== nextProps.buttonText) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (this.props.settings[\"mode\"] !== nextProps.settings[\"mode\"] ||\r\n\t\t\tthis.props.settings[\"difficulty\"] !== nextProps.settings[\"difficulty\"] ||\r\n\t\t\tthis.props.settings[\"size\"] !== nextProps.settings[\"size\"] ||\r\n\t\t\tthis.props.settings[\"quantity\"] !== nextProps.settings[\"quantity\"] ||\r\n\t\t\tthis.props.settings[\"speed\"] !== nextProps.settings[\"speed\"]\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t// in case simulation is active, this component should not trigger update\r\n\t\tif (!this.props.isGameActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst minQuantity = (quantityDiffVals[this.props.settings.difficulty][this.props.settings.size] || { min: 0 }).min;\r\n\t\tconst maxQuantity = (quantityDiffVals[this.props.settings.difficulty][this.props.settings.size] || { max: 1000 }).max;\r\n\t\tconst changedSpeed = speedDiffValues[this.props.settings.difficulty];\r\n\t\t// if quantity is greater or smaller than it should be according to size\r\n\t\tif (this.props.settings.quantity > maxQuantity ) {\r\n\t\t\treturn this.props.setGameSettings({ quantity: maxQuantity, speed: changedSpeed });\r\n\t\t}\r\n\t\tif (this.props.settings.quantity < minQuantity ) {\r\n\t\t\treturn this.props.setGameSettings({ quantity: minQuantity, speed: changedSpeed });\r\n\t\t}\r\n\t\t// if min, max values are not a problem, then set speed\r\n\t\tif (this.props.settings.speed !== changedSpeed) {\r\n\t\t\treturn this.props.setGameSettings({ speed: changedSpeed });\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\tconst { isOpen, toggle, startGame, buttonText, setGameSettings, isGameStopped,\r\n\t\t\t\t\tsettings: { mode, difficulty, size, quantity, speed } } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Modal key=\"game\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"game-modal\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>GAME SETTINGS</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Game mode</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{modeOptions.map((modeOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof modeOption != \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{modeOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-type={modeOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({ mode: modeOption.value })}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setGameSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseEnter={this.onMouseEnterInstructions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonMouseLeave={this.onMouseLeaveInstructions}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={modeOption.value === mode}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{modeOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Difficulty level</div>\r\n\t\t\t\t\t\t\t<div className=\"choice__header__sub\">Affects infection rate and quarantine.</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{difficultyOptions.map((difficultyOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (difficultyOption === \"|\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{difficultyOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={difficultyOption.value === 0 ? \"33% infection rate\" : difficultyOption.value === 1 ? \"50% infection rate\" : \"100% infection rate\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({ difficulty: difficultyOption.value })}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setGameSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={difficultyOption.value === difficulty}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{difficultyOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Size of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{sizeOptions.map((sizeOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof sizeOption != \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{sizeOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({size: sizeOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setGameSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={sizeOption.value === size}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{sizeOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Number of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{quantityValues[size].map((quantityValue, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (quantityValue === \"|\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{quantityValue}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// if quantity is outside of min / max values\r\n\t\t\t\t\t\t\t\t\tif ((quantityDiffVals[difficulty][size] && (quantityValue < quantityDiffVals[difficulty][size].min)) ||\r\n\t\t\t\t\t\t\t\t\t\t(quantityDiffVals[difficulty][size] && (quantityValue > quantityDiffVals[difficulty][size].max))\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink disabled={true} key={idx}>{quantityValue}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn \t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({quantity: quantityValue})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setGameSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={quantityValue === quantity}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{quantityValue}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"choice\">\r\n\t\t\t\t\t\t\t<div className=\"choice__header\">Speed of balls</div>\r\n\t\t\t\t\t\t\t<Nav className=\"choice__options\">\r\n\t\t\t\t\t\t\t\t{speedOptions.map((speedOption, idx) => {\r\n\t\t\t\t\t\t\t\t\tif (typeof speedOption != \"object\") {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{speedOption}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (speedOption.difficulty !== difficulty ) {\r\n\t\t\t\t\t\t\t\t\t\treturn <NavLink className=\"disabled\" key={idx}>{speedOption.type}</NavLink>;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-option={`${JSON.stringify({speed: speedOption.value})}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={setGameSettings}\r\n\t\t\t\t\t\t\t\t\t\t\t\tactive={speedOption.value === speed}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{speedOption.type}\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter onClick={startGame} data-title={isGameStopped ? \"\" : \"RESTART by changing game settings\"} className=\"game-modal__footer\">\r\n\t\t\t\t\t{isGameStopped ? \">>>\" : \"\"}&nbsp;&nbsp; {buttonText} &nbsp;&nbsp;{isGameStopped ? \"<<<\" : \"\"}\r\n\t\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)};\r\n};\r\n","import React from \"react\";\r\nimport { Button } from \"reactstrap\";\r\n\r\nimport \"./quarantineButtons.scss\";\r\n\r\nexport class QuarantineButtons extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif (nextProps.quarantineButtonsActive !== this.props.quarantineButtonsActive) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t// TODO: all logic for button handling!\r\n\r\n\trender() {\r\n\t\tconst { quarantineButtonsActive, setQuarantineInMotion } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonPointerDown={setQuarantineInMotion}\r\n\t\t\t\t\tclassName={`btn quarantine__btn quarantine__btn--left-top ${!quarantineButtonsActive && \"disabled\"}`}>\r\n\t\t\t\t\t\tQUARANTINE\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonPointerDown={setQuarantineInMotion}\r\n\t\t\t\t\tclassName={`btn quarantine__btn quarantine__btn--left-bottom ${!quarantineButtonsActive && \"disabled\"}`}>\r\n\t\t\t\t\t\tQUARANTINE\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonPointerDown={setQuarantineInMotion}\r\n\t\t\t\t\tclassName={`btn quarantine__btn quarantine__btn--right-top ${!quarantineButtonsActive && \"disabled\"}`}>\r\n\t\t\t\t\t\tQUARANTINE\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonPointerDown={setQuarantineInMotion}\r\n\t\t\t\t\tclassName={`btn quarantine__btn quarantine__btn--right-bottom ${!quarantineButtonsActive && \"disabled\"}`}>\r\n\t\t\t\t\t\tQUARANTINE\r\n\t\t\t\t</Button>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";   \r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer, Nav, NavLink } from \"reactstrap\";\r\n\r\nimport \"./timeChallengeEndDialog.scss\";\r\n\r\nexport class TimeChallengeEndDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t// starightforward - in case simulation is active, this component should not update\r\n\t\tif (!nextProps.isGameActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (nextProps.gameEnded !== this.props.gameEnded && nextProps.gameSettings[\"mode\"] === 1) {\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst { gameEnded, closeGameEndDialog, didPlayerWin } = this.props;\r\n\t\tconst shouldDialogOpen = gameEnded && this.props.gameSettings[\"mode\"] === 1;\r\n\t\treturn (\t\t\r\n\t\t\t<Modal key=\"game-time-challenge-end\" zIndex={shouldDialogOpen ? 1000: -1} isOpen={shouldDialogOpen} centered={true} fade={true} className=\"game-end\">\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className={`game-end-modal ${didPlayerWin ? \"game-end-modal--won\" : \"game-end-modal--lost\"}`}>\r\n\t\t\t\t\t\t\t<div className=\"game-end-modal__text__container\">\r\n\t\t\t\t\t\t\t\t<div className=\"game-end-modal__text__container__notif\">{didPlayerWin ? \"WON!\" : \"LOST!\" }</div>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName=\"game-end-modal__text__container__btn\"\r\n\t\t\t\t\t\t\t\t\ttabIndex=\"0\"\r\n\t\t\t\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\t\t\t\tonClick={closeGameEndDialog}\r\n\t\t\t\t\t\t\t\t\tclassName=\"game-end-modal__text__container__btn\">\r\n\t\t\t\t\t\t\t\t\t\t{didPlayerWin ? \"OK\" : \"Start over\"}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t</Modal>\r\n\t)};\r\n};\r\n","import React from \"react\";   \r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer, Button, Nav, NavLink } from \"reactstrap\";\r\n\r\nimport { speedToString, sizeToString } from \"../GameDialog/gameOptions\";\r\nimport \"./timeOpenEndDialog.scss\";\r\n\r\nexport class TimeOpenEndDialog extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisCopied: false\r\n\t\t}\r\n\r\n\t\tthis.copyToClipboard = this.copyToClipboard.bind(this);\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\t\r\n\t\t\t\t\r\n\t\t// starightforward - in case simulation is active, this component should not update\r\n\t\tif (!nextProps.isGameActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.gameEnded !== this.props.gameEnded && nextProps.gameSettings[\"mode\"] === 0 ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// trigger on game end, correct game mode and copied link\r\n\t\tif (nextProps.gameEnded && nextProps.gameSettings[\"mode\"] === 0 && this.state.isCopied !== nextState.isCopied) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tcopyToClipboard() {\r\n\t\tnavigator.permissions.query({name: \"clipboard-write\"})\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result.state === \"granted\" || result.state === \"prompt\") {\r\n\t\t\t\t\tnavigator.clipboard.writeText(\"https://www.viralballs.com\");\r\n\t\t\t\t\tthis.setState({ isCopied: true });\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t \t});\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst { gameEnded, closeGameEndDialog, clockTime, gameSettings } = this.props;\t\t\r\n\t\tconst shouldDialogOpen = gameEnded && gameSettings[\"mode\"] === 0;\r\n\t\tconst correctedClockTime = new Date(clockTime.getTime() - gameSettings[\"delayInSeconds\"]*1000);\r\n\t\treturn (\t\t\r\n\t\t\t<Modal key=\"game-open-end\" zIndex={shouldDialogOpen ? 1000: -1} isOpen={shouldDialogOpen} centered={true} fade={true} className=\"game-open-end\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={closeGameEndDialog}>GAME FINSHED</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"text\">\r\n\t\t\t\t\t\t\t<div className=\"grey\">You managed to play the game for</div>\r\n\t\t\t\t\t\t\t<div className=\"white\">{`${correctedClockTime.getMinutes()} minutes ${correctedClockTime.getSeconds()} seconds`}</div>\r\n\t\t\t\t\t\t\t<div className=\"grey stats d-flex justify-content-between\">\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Size: {sizeToString[gameSettings[\"size\"]]}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Nr.: {gameSettings[\"quantity\"]}</div>\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Speed: {speedToString[gameSettings[\"speed\"]]}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"link\">\r\n\t\t\t\t\t\t\t<div className=\"link__header\">Share game with your friends</div>\r\n\t\t\t\t\t\t\t<div className=\"grey\">(link will include same settings as you had)</div>\r\n\t\t\t\t\t\t{ this.state.isCopied ?\r\n\t\t\t\t\t\t\t<div className=\"link__copied\">Link copied <span role=\"img\" aria-label=\"smiley face\">&#128515;</span></div> \r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<Button onClick={this.copyToClipboard} >Copy link</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter onClick={closeGameEndDialog} className=\"game-modal__footer\">\r\n\t\t\t\t\t&gt;&gt;&gt;&nbsp;&nbsp; PLAY AGAIN &nbsp;&nbsp;&lt;&lt;&lt;\r\n\t\t\t\t</ModalFooter>\r\n\t\t</Modal>\r\n\t)};\r\n};\r\n","import React from \"react\";\r\nimport { Row, Modal, ModalHeader, ModalBody, Container, NavLink } from \"reactstrap\";\r\nimport aboutImage from \"../../assets/viralballs-about-img.png\";\r\n\r\nimport \"./aboutDialog.scss\";\r\n\r\nexport class AboutDialog extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.onStaySafeLinkClick = this.onStaySafeLinkClick.bind(this);\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.isOpen !== this.props.isOpen) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\tonStaySafeLinkClick() {\r\n\t\tthis.props.toggle();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.props.toggleStaySafeDialog();\r\n\t\t}, 250);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { toggle, isOpen } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Modal key=\"about-dialog\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"about-dialog\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>ABOUT</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"about-dialog__photo\">\r\n\t\t\t\t\t\t\t<img src={aboutImage} alt=\"creators photo\" />>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"about-dialog__text\">\r\n\t\t\t\t\t\t\t<p>ViralBalls is a side project done by designer Igor Donkov and programmer Rok Zigon.\r\n\t\t\t\t\t\t\t\tThe simulator and the game were developed in the midst of Corona / Covid 19, 2020 worldwide plandemic.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>We wanted to visually explore the pandemic situation and add a simple game. Part of the project is to spread\r\n\t\t\t\t\t\t\t\tawareness and add some simple\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tonClick={this.onStaySafeLinkClick}\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t\t\tStay safe\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\tinstructions.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>Have a question, comment, suggestion?\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tonClick={this.onStaySafeLinkClick}\r\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\">\r\n\t\t\t\t\t\t\t\t\t\tContact\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<div>Check main project:</div>\r\n\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\tclassName=\"countdown\"\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\r\n\t\t\t\t\t\t\t\thref=\"https://www.countdownkings.com/\">\r\n\t\t\t\t\t\t\t\t\tCountdownKings.com\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t};\r\n};\r\n","import React from \"react\";   \r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer, NavLink } from \"reactstrap\";\r\n\r\nimport \"./staySafeDialog.scss\";\r\n\r\nexport class StaySafeDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\t\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.isOpen !== this.props.isOpen) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isOpen, toggle } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Modal key=\"staysafe-dialog\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"staysafe-dialog\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>STAY SAFE</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"staysafe-dialog__text\">\r\n\t\t\t\t\t\t\t<p>ViraticBalls is a side project done by designer Igor Donkov and programmer Rok Zigon.\r\n\t\t\t\t\t\t\t\tThe simulator and the game were developed in the midst of Corona / Covid 19 , 2020 worldwide pandemic.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>We wanted to visually explore the pandemic situation and add a simple game. Part of the project is to spread\r\n\t\t\t\t\t\t\t\tawareness and add some simple \r\n\t\t\t\t\t\t\t\tinstructions.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p>Have a qustion, comment, suggestion?</p>\r\n\t\t\t\t\t\t\t<div>Check main project:</div>\r\n\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\tclassName=\"countdown\"\r\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\thref=\"https://www.countdownkings.com/\">\r\n\t\t\t\t\t\t\t\t\tCountdownKings.com\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t};\r\n};\r\n","import React from \"react\";   \r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer } from \"reactstrap\";\r\nimport instructions from \"./howToPlayInstructions\";\r\n\r\nimport \"./howToPlayDialog.scss\";\r\n\r\nexport class HowToPlayDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\t\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.isOpen !== this.props.isOpen) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isOpen, toggle, gameSettings, startGame } = this.props;\r\n\t\t\t\t\r\n\t\treturn (\r\n\t\t\t<Modal key=\"howtoplay-dialog\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"howtoplay-dialog\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>HOW TO PLAY: <span className=\"bold\">{gameSettings[\"mode\"] ? \"KEEP UNINFECTED\" : \"TIME CHALLENGE\"}</span></ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"howtoplay-dialog__text\">\r\n\t\t\t\t\t\t\t<ul className=\"list\">\r\n\t\t\t\t\t\t\t\t{instructions[gameSettings[\"mode\"]].map( instruction => {\r\n\t\t\t\t\t\t\t\t\treturn <li className=\"list__item\">{instruction}</li>;\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter onClick={startGame} className=\"game-modal__footer\">\r\n\t\t\t\t\t&gt;&gt;&gt;&nbsp;&nbsp; START &nbsp;&nbsp;&lt;&lt;&lt;\r\n\t\t\t\t</ModalFooter>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t};\r\n};\r\n","import React from \"react\";   \r\nimport { Row, Modal, ModalHeader, ModalBody, ModalFooter, \r\n\t\tContainer } from \"reactstrap\";\r\n\r\nimport \"./beatYourFriendDialog.scss\";\r\n\r\nexport class BeatYourFriendDialog extends React.Component {\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\t\r\n\t\t// trigger only on game end and correct game mode\r\n\t\tif (nextProps.isOpen !== this.props.isOpen) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isOpen, toggle, gameSettings, startGame } = this.props;\r\n\t\t\t\t\r\n\t\treturn (\r\n\t\t\t<Modal key=\"beatyourfriend-dialog\" zIndex={isOpen ? 1000: -1} isOpen={isOpen} toggle={toggle} centered={true} fade={true} className=\"beatyourfriend-dialog\">\r\n\t\t\t\t<ModalHeader charCode=\"X\" toggle={toggle}>TRY TO BEAT YOUR FRIEND</ModalHeader>\r\n\t\t\t\t<ModalBody>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Container className=\"beatyourfriend-dialog__container\">\r\n\t\t\t\t\t\t\t<div > Your friend played this game for</div>\r\n\t\t\t\t\t\t\t<div className=\"white\">3 minutes, 16 seconds</div>\r\n\t\t\t\t\t\t\t<div className=\"\">Game mode: Time Challenge</div>\r\n\t\t\t\t\t\t\t<div className=\"\">Difficulty: Easy</div>\r\n\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Balls: Small,</div>\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Nr. 200,</div>\r\n\t\t\t\t\t\t\t\t<div className=\"span\">Speed: Slow</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</ModalBody>\r\n\t\t\t\t<ModalFooter onClick={startGame} className=\"game-modal__footer\">\r\n\t\t\t\t\tOK\r\n\t\t\t\t</ModalFooter>\r\n\t\t\t</Modal>\r\n\t\t)\r\n\t};\r\n};\r\n","\r\nimport sound from \"../../assets/gameStart.mp3\";\r\n\r\nexport const gameSettings = {\r\n\taudioStart: false,\r\n\tisGameActive: false,\r\n\tgamePaused: true,\r\n\tgameStopped: true,\r\n\t// gamesettings - popups\r\n\tgameSettingsOpen: false,\r\n\tgameRestarting: false,\r\n\t// PLAYER\r\n\tgameEnded: false,\r\n\tdidPlayerWin: false,\r\n\t// GAME\r\n\t// quarantine settings\r\n\tquarantineButtonsActive: false,\r\n\tquarantinePlaced: false,\r\n\tavailableQuarantines: [],\r\n\tquarantineBeingDragged: false,\r\n\tquarantineOverlapping: false,\r\n\tquarantineCancelled: false,\r\n\tdraggedQuarantine: {\r\n\t\tid: -1,\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tsize: 250\r\n\t},\r\n\t// game settings\r\n\tgameSettings: {\r\n\t\tmode: 0,\r\n\t\tdifficulty: 1,\r\n\t\tsize: 8,\r\n\t\tquantity: 300,\r\n\t\tspeed: 0.6,\r\n\t\tdelayInSeconds: 3,\r\n\t\tnrOfQuarantines: 5, // max nr\r\n\t}\r\n}\r\n\r\nexport const resetSettings = {\r\n\tgameEnded: false,\r\n\tdidPlayerWin: false,\r\n\tquarantineBeingDragged: false,\r\n\tquarantineOverlapping: false,\r\n\tquarantineButtonsActive: true, // change this setting\r\n\tquarantinePlaced: false,\r\n\tgameSettingsOpen: false,\r\n\thowToPlayDialogOpen: false,\r\n\tgamePaused: false,\r\n\tgameStopped: false,\r\n\tquarantineCancelled: false,\r\n\tdraggedQuarantine: {\r\n\t\tid: -1,\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tsize: 250\r\n\t},\r\n}\r\n// GAMEPLAY\r\nexport function gameEnded({ playerWin }) {\r\n\tthis.setState({\r\n\t\tgameEnded: true,\r\n\t\tgamePaused: true,\r\n\t\tgameStopped: true,\r\n\t\tdidPlayerWin: playerWin\r\n\t});\r\n}\r\nexport function closeGameEndDialog() {\r\n\tconst playerWin = this.state.didPlayerWin;\r\n\tthis.stop();\r\n\tthis.startGame(false);\r\n\tthis.setState({\r\n\t\t...resetSettings,\r\n\t\tclockTime: new Date(0),\r\n\t\tstartButtonText: \"START GAME\",\r\n\t\tdidPlayerWin: playerWin,\r\n\t\tgameSettingsOpen: true,\r\n\t\tgamePaused: true,\r\n\t\tgameStopped: true\r\n\t});\r\n}\r\n\r\n\r\nexport function onContextMenuHideQuarantine(e) {\r\n\te.preventDefault();\r\n\tif (this.state.quarantineBeingDragged) {\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn {\r\n\t\t\t\tquarantineCancelled: true,\r\n\t\t\t\tquarantineBeingDragged: false\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function onWheelScroll(e) {\r\n\tconst deltaY = e.deltaY;\r\n\tif (this.state.quarantineBeingDragged) {\r\n\t\tif (deltaY > 0) {\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdraggedQuarantine: {\r\n\t\t\t\t\t\t...prevState.draggedQuarantine,\r\n\t\t\t\t\t\tsize: prevState.draggedQuarantine[\"size\"] + 30\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t } else {\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdraggedQuarantine: {\r\n\t\t\t\t\t\t...prevState.draggedQuarantine,\r\n\t\t\t\t\t\tsize: prevState.draggedQuarantine[\"size\"] -30\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\nexport function onMouseMove(e) {\r\n\tif (this.state.quarantineButtonsActive) {\r\n\t\tconst pageX = e.pageX;\r\n\t\tconst pageY = e.pageY;\r\n\t\tthis.setState(prevstate => {\r\n\t\t\treturn { draggedQuarantine: {...prevstate.draggedQuarantine, x: pageX , y: pageY} }\r\n\t\t});\r\n\t}\r\n}\r\n// GAME\r\nexport function stopStartGame() {\r\n\tif (this.state.gamePaused && !this.state.gameStopped) { // CONTINUE\r\n\t\tthis.toggleGameDialog();\r\n\t} else {\t\t\t\t\t\t\t\t\t\t\t\t// START\r\n\t\tthis.setState({ gameRestarting: true });\r\n\t\tsetTimeout(() => this.setState({ gameRestarting: false }), 1000);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.startGame(true);\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tisGameActive: true,\r\n\t\t\t\t\tclockTime: new Date(0),\r\n\t\t\t\t\tstartButtonText: \"CONTINUE GAME\",\r\n\t\t\t\t\thealthy: prevState.gameSettings[\"quantity\"] - 1,\r\n\t\t\t\t\tcontagious: 1,\r\n\t\t\t\t\t...resetSettings\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 400)\r\n\t\tsetTimeout(() => {\r\n\t\t\tconst audio = new Audio(sound);\r\n\t\t\taudio.play();\r\n\t\t}, 3000);\r\n\t}\r\n}\r\n\r\nexport function setGameSettings(e) {\r\n\tlet targetData, parsedData;\r\n\t// triggered on event\r\n\tif (e.currentTarget) {\r\n\t\ttargetData = e.currentTarget.getAttribute(\"data-option\");\r\n\t\tparsedData = JSON.parse(targetData) || {};\r\n\t} else {\r\n\t\t// triggered directly from dialog\r\n\t\tparsedData = e;\r\n\t}\r\n\tconst newGameSettings = {...this.state.gameSettings, ...parsedData};\r\n\tthis.setState({ gameRestarting: true });\r\n\tsetTimeout(() => this.setState({ gameRestarting: false }), 1000);\r\n\tsetTimeout(() => {\r\n\t\tthis.setState(prevState => {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.startGame(false, newGameSettings);\r\n\t\t\t// reset settings as you would at game start\r\n\t\t\treturn ({\r\n\t\t\t\tisGameActive: true,\r\n\t\t\t\tclockTime: new Date(0),\r\n\t\t\t\tgameSettings: newGameSettings,\r\n\t\t\t\thealthy: newGameSettings[\"quantity\"] - 1,\r\n\t\t\t\tcontagious: 1,\r\n\t\t\t\tstartButtonText: \"START GAME\",\r\n\t\t\t\t...resetSettings,\r\n\t\t\t\t// override reset settings after this\r\n\t\t\t\tgameSettingsOpen: true,\r\n\t\t\t\tgameStopped: true,\r\n\t\t\t\tgamePaused: true,\r\n\t\t\t});\r\n\t\t});\r\n\t}, 400);\r\n}\r\nexport function resetDraggedQuarantineId() {\r\n\tthis.setState({\r\n\t\tdraggedQuarantine: {...resetSettings.draggedQuarantine}\r\n\t});\r\n}\r\nexport function setQuarantineInMotion(e) {\r\n\tconst pageX = e.pageX;\r\n\tconst pageY = e.pageY;\r\n\t// pop first value from available quarantines\r\n\tthis.setState(prevState => {\r\n\t\treturn {\r\n\t\t\tdraggedQuarantine: {\r\n\t\t\t\tid: prevState.availableQuarantines.slice(0,1)[0] || -1,\r\n\t\t\t\tx: pageX,\r\n\t\t\t\ty: pageY,\r\n\t\t\t\tsize: prevState.draggedQuarantine.size\r\n\t\t\t},\r\n\t\t\tquarantineBeingDragged: true,\r\n\t\t\tquarantineButtonsActive: true,\r\n\t\t\tquarantinePlaced: false,\r\n\t\t\tavailableQuarantines: prevState.availableQuarantines.slice(1)\r\n\t\t};\r\n\t});\r\n}\r\nexport function setQuarantineNonactive(id) {\r\n\tthis.setState(prevState => {\r\n\t\tconst index = prevState.availableQuarantines.indexOf(id);\r\n\t\t// index about to be inactive shouldn't be in available quarantines array - so leave it be if you find it\r\n\t\tif (index > -1) {\r\n\t\t\treturn {\r\n\t\t\t\tavailableQuarantines: prevState.availableQuarantines,\r\n\t\t\t\tquarantineCancelled: false,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\tavailableQuarantines: prevState.availableQuarantines.concat(id),\r\n\t\t\t\tquarantineCancelled: false,\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n}\r\nexport function toggleGamePause() {\r\n\treturn this.state.gamePaused && !this.state.gameStopped ? this.unpause() : this.pause();\r\n}\r\nexport function toggleGameDialog() {\r\n\tif (this.state.isSimulationActive) {\r\n\t\tthis.setState({ gameRestarting: true });\r\n\t\tsetTimeout(() => this.setState({ gameRestarting: false }), 1000);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.startGame(false);\r\n\t\t\t// only when clicking on navbar link -> stop simulation and show game dialog\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\treturn ({\r\n\t\t\t\t\tgameSettingsOpen: true,\r\n\t\t\t\t\tgamePaused: true,\r\n\t\t\t\t\tstartButtonText: \"START GAME\",\r\n\t\t\t\t\tisSimulationActive: false,\r\n\t\t\t\t\tisGameActive: true,\r\n\t\t\t\t\tsimulationPaused: true,\r\n\t\t\t\t\tsimulationStopped: true\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}, 400);\r\n\t} else {\r\n\t\tthis.toggleGamePause();\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn ({\r\n\t\t\t\tgameSettingsOpen: !prevState.gameSettingsOpen,\r\n\t\t\t\tgamePaused: !prevState.gamePaused,\r\n\t\t\t\tstartButtonText: prevState.gameStopped ? \"START GAME\" : \"CONTINUE GAME\",\r\n\t\t\t\tisSimulationActive: false,\r\n\t\t\t\tisGameActive: true,\r\n\t\t\t\tsimulationPaused: true,\r\n\t\t\t\tsimulationStopped: true\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n}","import { resetSettings as gameResetSettings } from \"../game/gameState\";\r\n\r\nexport const simulationSettings = {\r\n\tisSimulationActive: true,\r\n\t// canvas state\r\n\tsimulationRestarting: false,\r\n\tsimulationPaused: false,\r\n\tsimulationStopped: false,\r\n\t// modals - popups\r\n\tsimulationSettingsOpen: false,\r\n\t// SETTINGS\r\n\tsimulationSettings: {\r\n\t\tsize: 8,\r\n\t\tspeed: .6,\r\n\t\tquantity: 300,\r\n\t\tdeactivateAfter: 0,\r\n\t\tshowTime: true,\r\n\t\tshowStats: true,\r\n\t\tautorestart: true\r\n\t}\r\n}\r\nexport function toggleSimulationPause() {\r\n\treturn this.state.simulationPaused && !this.state.simulationStopped ? this.unpause() : this.pause();\r\n}\r\nexport function stopStartSimulation() {\r\n\tif (this.state.simulationPaused && !this.state.simulationStopped) { // CONTINUE\r\n\t\tthis.toggleSimulationDialog();\r\n\t} else {\r\n\t\tthis.stop();\t\t\t\t\t\t// START\r\n\t\tthis.startSimulation(true);\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tclockTime: new Date(0),\r\n\t\t\tsimulationStopped: false,\r\n\t\t\tsimulationPaused: false,\r\n\t\t\tstartButtonText: \"CONTINUE SIMULATION\",\r\n\t\t\tsimulationSettingsOpen: false,\r\n\t\t\thealthy: prevState.simulationSettings[\"quantity\"] - 1, contagious: 1,\r\n\t\t\t// reset game settings\r\n\t\t\t...gameResetSettings,\r\n\t\t\tisGameActive: false,\r\n\t\t\tgamePaused: true,\r\n\t\t\tgameStopped: true,\r\n\t\t\tquarantineButtonsActive: false, // only for testing purposes\r\n\t\t\tavailableQuarantines: []\r\n\t\t}));\r\n\t}\r\n}\r\nexport function simulationRestart() {\r\n\t// fade out-in effect\r\n\tthis.setState({ simulationRestarting: true });\r\n\tsetTimeout(() => this.setState({ simulationRestarting: false }), 1200);\r\n\tsetTimeout(() => {\r\n\t\tthis.stop();\r\n\t\tthis.startSimulation(true);\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tclockTime: new Date(0),\r\n\t\t\tsimulationStopped: false,\r\n\t\t\tsimulationPaused: false,\r\n\t\t\tstartButtonText: \"CONTINUE SIMULATION\",\r\n\t\t\tsimulationSettingsOpen: false,\r\n\t\t\thealthy: prevState.simulationSettings[\"quantity\"] - 1,\r\n\t\t\tcontagious: 1\r\n\t\t}));\r\n\t}, 600);\r\n\r\n}\r\nexport function setSimulationSettings(e) {\r\n\tlet targetData, parsedData;\r\n\t// triggered on event\r\n\tif (e.currentTarget) {\r\n\t\ttargetData = e.currentTarget.getAttribute(\"data-option\");\r\n\t\tparsedData = JSON.parse(targetData) || {};\r\n\t} else {\r\n\t\t// triggered directly from dialog\r\n\t\tparsedData = e;\r\n\t}\r\n\tthis.setState({ simulationRestarting: true });\r\n\tsetTimeout(() => this.setState({ simulationRestarting: false }), 1000);\r\n\tsetTimeout(() => {\r\n\t\tthis.setState(prevState => {\r\n\t\t\tconst newSimulationSettings = {...prevState.simulationSettings, ...parsedData};\r\n\t\t\t// only reset simulation for size and quantity - for preview\r\n\t\t\tif (parsedData[\"size\"] || parsedData[\"quantity\"] || parsedData[\"speed\"]) {\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tthis.startSimulation(false, newSimulationSettings);\r\n\t\t\t\treturn ({ simulationSettings: newSimulationSettings, clockTime: new Date(0), healthy: newSimulationSettings[\"quantity\"] - 1,\r\n\t\t\t\t\t\tcontagious: 1, simulationStopped: true, simulationPaused: true, startButtonText: \"START SIMULATION\" });\r\n\t\t\t}\r\n\t\t\treturn ({ simulationSettings: newSimulationSettings });\r\n\t\t});\r\n\t}, 400);\r\n}\r\n\r\nexport function toggleSimulationDialog() {\r\n\tif (this.state.isGameActive) {\r\n\t\tthis.setState({ gameRestarting: true });\r\n\t\tsetTimeout(() => this.setState({ gameRestarting: false }), 1000);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.stop();\r\n\t\t\tthis.startSimulation(false);\r\n\t\t\t// only when clicking on navbar link -> stop game and show simulation dialog\r\n\t\t\tthis.setState(prevState => {\r\n\t\t\t\treturn ({\r\n\t\t\t\t\tsimulationSettingsOpen: true,\r\n\t\t\t\t\tsimulationPaused: true,\r\n\t\t\t\t\tstartButtonText: \"START SIMULATION\",\r\n\t\t\t\t\tquarantineButtonsActive: false,\r\n\t\t\t\t\tisSimulationActive: true,\r\n\t\t\t\t\tisGameActive: false,\r\n\t\t\t\t\tgamePaused: true,\r\n\t\t\t\t\tgameStopped: true\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}, 400);\r\n\t} else {\r\n\t\t// in all other cases toggle\r\n\t\tthis.toggleSimulationPause();\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn ({\r\n\t\t\t\tsimulationSettingsOpen: !prevState.simulationSettingsOpen,\r\n\t\t\t\tsimulationPaused: !prevState.simulationPaused,\r\n\t\t\t\tstartButtonText: prevState.simulationStopped ? \"START SIMULATION\" : \"CONTINUE SIMULATION\",\r\n\t\t\t\tisSimulationActive: true,\r\n\t\t\t\tisGameActive: false,\r\n\t\t\t\tgamePaused: true,\r\n\t\t\t\tgameStopped: true\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n}","import React from \"react\";\r\nimport { clearDriftless, setDriftlessInterval } from 'driftless';\r\n\r\nimport { startSimulation, startGame, stop, pause, unPause } from \"./helpers/actions\";\r\nimport { SimulationDialog, NavBar, ShareDialog, GameDialog, QuarantineButtons, TimeChallengeEndDialog,\r\n\tHowToPlayDialog, TimeOpenEndDialog, AboutDialog, StaySafeDialog, BeatYourFriendDialog } from \"./components\";\r\nimport { simulationSettings, stopStartSimulation, simulationRestart, setSimulationSettings,\r\n\ttoggleSimulationPause, toggleSimulationDialog } from \"./helpers/simulation/simulationState\";\r\nimport { gameSettings, setGameSettings, onMouseMove, stopStartGame, gameRestart, onWheelScroll, onContextMenuHideQuarantine, gameEnded,\r\n\tsetQuarantineInMotion, setQuarantineNonactive, toggleGamePause, toggleGameDialog, resetDraggedQuarantineId, closeGameEndDialog } from \"./helpers/game/gameState\";\r\n\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport \"./main.scss\";\r\n\r\nexport default class HomePage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.autostart = true;\r\n\t\tthis.simulationApp = null;\r\n\t\tthis.gameApp = null;\r\n\r\n\t\tthis.state = {\r\n\t\t\t...simulationSettings,\r\n\t\t\t...gameSettings,\r\n\t\t\thasError: false,\r\n\t\t\terror: null,\r\n\t\t\tisCopied: false,\r\n\t\t\t// time\r\n\t\t\tcurrentTime: new Date().getTime(),\r\n\t\t\tclockTime: new Date(0),\r\n\t\t\t// canvas state\r\n\t\t\tcontagious: 1,\r\n\t\t\thealthy: 199,\r\n\t\t\t// nav & buttons\r\n\t\t\tstartButtonText: \"CONTINUE SIMULATION\",\r\n\t\t\tisNavbarExpanded: false,\r\n\t\t\tisNavbarVisible: true,\r\n\t\t\t// modals - popups\r\n\t\t\tshareDialogOpen: false,\r\n\t\t\taboutDialogOpen: false,\r\n\t\t\tstaySafeDialogOpen: false,\r\n\t\t\thowToPlayDialogOpen: false,\r\n\t\t\tbeatYourFriendDialogOpen: false\r\n\t\t}\r\n\r\n\t\tthis.interval = null;\r\n\t\tthis.canvasWidth = window.innerWidth < 800 ? 800 : window.innerWidth;\r\n\t\tthis.canvasHeight = window.innerHeight < 600 ? 600 : window.innerHeight;\r\n\r\n\t\tthis.stop = stop.bind(this);\r\n\t\tthis.startSimulation = startSimulation.bind(this);\r\n\t\tthis.startGame = startGame.bind(this);\r\n\t\tthis.pause = pause.bind(this);\r\n\t\tthis.unpause = unPause.bind(this);\r\n\r\n\t\tthis.toggleDialog = this.toggleDialog.bind(this);\r\n\t\tthis.toggleGamePause = toggleGamePause.bind(this);\r\n\t\tthis.toggleAboutDialog = this.toggleAboutDialog.bind(this);\r\n\t\tthis.toggleSimulationPause = toggleSimulationPause.bind(this);\r\n\t\tthis.toggleStaySafeDialog = this.toggleStaySafeDialog.bind(this);\r\n\t\tthis.toggleHowToPlayDialog = this.toggleHowToPlayDialog.bind(this);\r\n\t\tthis.toggleBeatYourFriendDialog = this.toggleBeatYourFriendDialog.bind(this);\r\n\t\tthis.onMouseMove = onMouseMove.bind(this);\r\n\t\tthis.intervalTime = this.intervalTime.bind(this);\r\n\t\tthis.handleResize = this.handleResize.bind(this);\r\n\t\tthis.handleBlur = this.handleBlur.bind(this);\r\n\t\tthis.handleRefocus = this.handleRefocus.bind(this);\r\n\t\tthis.copyToClipboard = this.copyToClipboard.bind(this);\r\n\t\t// GAME\r\n\t\tthis.gameEnded = gameEnded.bind(this);\r\n\t\tthis.stopStartGame = stopStartGame.bind(this);\r\n\t\tthis.onWheelScroll = onWheelScroll.bind(this);\r\n\t\tthis.setGameSettings = setGameSettings.bind(this);\r\n\t\tthis.toggleGameDialog = toggleGameDialog.bind(this);\r\n\t\tthis.closeGameEndDialog = closeGameEndDialog.bind(this);\r\n\t\tthis.setQuarantineInMotion = setQuarantineInMotion.bind(this);\r\n\t\tthis.setQuarantineNonactive = setQuarantineNonactive.bind(this);\r\n\t\tthis.resetDraggedQuarantineId = resetDraggedQuarantineId.bind(this);\r\n\t\tthis.onContextMenuHideQuarantine = onContextMenuHideQuarantine.bind(this);\r\n\t\t// SIMULATION\r\n\t\tthis.simulationRestart= simulationRestart.bind(this);\r\n\t\tthis.toggleShareDialog = this.toggleShareDialog.bind(this);\r\n\t\tthis.stopStartSimulation = stopStartSimulation.bind(this);\r\n\t\tthis.setSimulationSettings = setSimulationSettings.bind(this);\r\n\t\tthis.toggleSimulationDialog = toggleSimulationDialog.bind(this);\r\n\t\tthis.toggleNavbarVisibility = this.toggleNavbarVisibility.bind(this);\r\n\t\tthis.toggleNavbarItemsExpand = this.toggleNavbarItemsExpand.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.startSimulation(true);\r\n\t\twindow.addEventListener('resize', this.handleResize);\r\n\t\t// window.addEventListener(\"blur\", this.handleBlur);\r\n\t\t// window.addEventListener(\"focus\", this.handleRefocus);\r\n\t\tthis.interval = setDriftlessInterval(this.intervalTime, 1000);\r\n\t}\r\n\tcomponentDidCatch(error, errorInfo) {\r\n\t\t// logErrorToMyService(error, errorInfo);\r\n\t}\r\n\tstatic getDerivedStateFromError(error) {\r\n\t\t// Update state so the next render will show the fallback UI.\r\n\t\treturn { hasError: true };\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tclearDriftless(this.interval);\r\n\t\tthis.simulationApp && this.simulationApp.destroy(true);\r\n\t\tthis.gameApp && this.gameApp.destroy(true);\r\n\t}\r\n\tintervalTime() {\r\n\t\tthis.setState(prevState => {\r\n\t\t\t// in case of simulation /game either stopped or paused\r\n\t\t\tif ((this.state.isSimulationActive && (this.state.simulationPaused || this.state.simulationStopped)) ||\r\n\t\t\t\t(this.state.isGameActive && (this.state.gamePaused || this.state.gameStopped))\r\n\t\t\t) {\r\n\t\t\t\t// stop calculating currentTime because of deactivate time\r\n\t\t\t\treturn ({ currentTime: prevState.currentTime })\r\n\t\t\t}\r\n\t\t\t// if simulation / game is not paused, calculate start time a new\r\n\t\t\treturn ({ currentTime: new Date().getTime(), clockTime: new Date(prevState.clockTime.getTime() + 1000) })\r\n\t\t});\r\n\t}\r\n\thandleBlur() {\r\n\t\tif (this.state.isGameActive && !this.state.gamePaused) {\r\n\t\t\tthis.toggleDialog();\r\n\t\t}\r\n\t}\r\n\thandleRefocus() {\r\n\t\tif (this.state.isGameActive && this.state.gamePaused) {\r\n\t\t\tthis.toggleDialog();\r\n\t\t}\r\n\t}\r\n\thandleResize(e) {\r\n\t\tthis.canvasWidth = window.innerWidth < this.canvasWidth ? this.canvasWidth : window.innerWidth;\r\n\t\tthis.canvasHeight = window.innerHeight < this.canvasHeight ? this.canvasHeight : window.innerHeight;\r\n\t}\r\n\r\n\ttoggleDialog(e) {\r\n\t\tconst target = e && e.currentTarget || null;\r\n\t\t// on simulation -> show dialog\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationDialog();\r\n\t\t// on quarantineButtonsActive -> should trigger quarantineDrop - user should have quarantine attached to cursor\r\n\t\t} else if (this.state.quarantineBeingDragged && !this.state.quarantinePlaced) {\r\n\t\t\t// overlap check - dont'l let the user lay quarantine down\r\n\t\t\tif (!this.state.quarantineOverlapping) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tquarantineBeingDragged: false,\r\n\t\t\t\t\tquarantineButtonsActive: true,\r\n\t\t\t\t\tquarantinePlaced: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.toggleGameDialog();\r\n\t\t}\r\n\t}\r\n\ttoggleAboutDialog(){\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationPause();\r\n\t\t\tthis.setState(prevState => ({ simulationPaused: !prevState.simulationPaused, aboutDialogOpen: !prevState.aboutDialogOpen }));\r\n\t\t} else {\r\n\t\t\tthis.toggleGamePause();\r\n\t\t\tthis.setState(prevState => ({ gamePaused: !prevState.gamePaused, aboutDialogOpen: !prevState.aboutDialogOpen }));\r\n\t\t}\r\n\t}\r\n\ttoggleShareDialog(e) {\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationPause();\r\n\t\t\tthis.setState(prevState => ({ simulationPaused: !prevState.simulationPaused, shareDialogOpen: !prevState.shareDialogOpen }));\r\n\t\t} else {\r\n\t\t\tthis.toggleGamePause();\r\n\t\t\tthis.setState(prevState => ({ gamePaused: !prevState.gamePaused, shareDialogOpen: !prevState.shareDialogOpen }));\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setState({ isCopied: false });\r\n\t\t}, 1000);\r\n\t}\r\n\ttoggleStaySafeDialog() {\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationPause();\r\n\t\t\tthis.setState(prevState => ({ simulationPaused: !prevState.simulationPaused, staySafeDialogOpen: !prevState.staySafeDialogOpen}));\r\n\t\t} else {\r\n\t\t\tthis.toggleGamePause();\r\n\t\t\tthis.setState(prevState => ({ gamePaused: !prevState.gamePaused, staySafeDialogOpen: !prevState.staySafeDialogOpen}));\r\n\t\t}\r\n\t}\r\n\ttoggleHowToPlayDialog() {\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationPause();\r\n\t\t\tthis.setState(prevState => ({ simulationPaused: !prevState.simulationPaused, howToPlayDialogOpen: !prevState.howToPlayDialogOpen}));\r\n\t\t} else {\r\n\t\t\tthis.toggleGamePause();\r\n\t\t\tthis.setState(prevState => ({ gamePaused: !prevState.gamePaused, howToPlayDialogOpen: !prevState.howToPlayDialogOpen}));\r\n\t\t}\r\n\t}\r\n\ttoggleBeatYourFriendDialog() {\r\n\t\tif (this.state.isSimulationActive) {\r\n\t\t\tthis.toggleSimulationPause();\r\n\t\t\tthis.setState(prevState => ({ simulationPaused: !prevState.simulationPaused, beatYourFriendDialogOpen: !prevState.beatYourFriendDialogOpen}));\r\n\t\t} else {\r\n\t\t\tthis.toggleGamePause();\r\n\t\t\tthis.setState(prevState => ({ gamePaused: !prevState.gamePaused, beatYourFriendDialogOpen: !prevState.beatYourFriendDialogOpen}));\r\n\t\t}\r\n\t}\r\n\ttoggleNavbarItemsExpand() {\r\n\t\tthis.setState(prevState => ({ isNavbarExpanded: !prevState.isNavbarExpanded}));\r\n\t}\r\n\ttoggleNavbarVisibility() {\r\n\t\tthis.setState(prevState => ({ isNavbarVisible: !prevState.isNavbarVisible}));\r\n\t}\r\n\tcopyToClipboard() {\r\n\t\tnavigator.permissions.query({name: \"clipboard-write\"})\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result.state === \"granted\" || result.state === \"prompt\") {\r\n\t\t\t\t\tnavigator.clipboard.writeText(\"https://www.covidsimulator.com\");\r\n\t\t\t\t\tthis.setState({ isCopied: true });\r\n\t\t\t\t}\r\n\t\t \t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section className=\"main\">\r\n\t\t\t\t<NavBar\r\n\t\t\t\t\tcurrentTime={this.state.currentTime}\r\n\t\t\t\t\tclockTime={this.state.clockTime}\r\n\t\t\t\t\tonMouseMove={this.onMouseMove}\r\n\t\t\t\t\ttoggleNavbarItemsExpand={this.toggleNavbarItemsExpand}\r\n\t\t\t\t\ttoggleNavbarVisibility={this.toggleNavbarVisibility}\r\n\t\t\t\t\tisNavbarExpanded={this.state.isNavbarExpanded}\r\n\t\t\t\t\tisNavbarVisible={this.state.isNavbarVisible}\r\n\t\t\t\t\ttoggleSimulationDialog={this.toggleSimulationDialog}\r\n\t\t\t\t\ttoggleShareDialog={this.toggleShareDialog}\r\n\t\t\t\t\ttoggleGameDialog={this.toggleGameDialog}\r\n\t\t\t\t\ttoggleAboutDialog={this.toggleAboutDialog}\r\n\t\t\t\t\ttoggleStaySafeDialog={this.toggleStaySafeDialog}\r\n\t\t\t\t\tsimulationSettings={this.state.simulationSettings}\r\n\t\t\t\t\tgameSettings={this.state.gameSettings}\r\n\t\t\t\t\tisSimulationActive={this.state.isSimulationActive}\r\n\t\t\t\t\tisGameActive={this.state.isGameActive}\r\n\t\t\t\t\tgamePaused={this.state.gamePaused}\r\n\t\t\t\t\tcontagious={this.state.contagious}\r\n\t\t\t\t\thealthy={this.state.healthy}\r\n\t\t\t\t\tgameEnded={this.state.gameEnded}\r\n\t\t\t\t/>\r\n\t\t\t\t<SimulationDialog\r\n\t\t\t\t\tstartSimulation={this.stopStartSimulation}\r\n\t\t\t\t\tisSimulationActive={this.state.isSimulationActive}\r\n\t\t\t\t\tisSimulationStopped={this.state.simulationPaused}\r\n\t\t\t\t\tisOpen={this.state.simulationSettingsOpen}\r\n\t\t\t\t\ttoggle={this.toggleSimulationDialog}\r\n\t\t\t\t\tbuttonText={this.state.startButtonText}\r\n\t\t\t\t\tsettings={this.state.simulationSettings}\r\n\t\t\t\t\tsetSimulationSettings={this.setSimulationSettings}\r\n\t\t\t\t/>\r\n\t\t\t\t<GameDialog\r\n\t\t\t\t\tstartGame={this.stopStartGame}\r\n\t\t\t\t\tisOpen={this.state.gameSettingsOpen}\r\n\t\t\t\t\tisGameActive={this.state.isGameActive}\r\n\t\t\t\t\tisGameStopped={this.state.gameStopped}\r\n\t\t\t\t\ttoggle={this.toggleGameDialog}\r\n\t\t\t\t\tbuttonText={this.state.startButtonText}\r\n\t\t\t\t\tsettings={this.state.gameSettings}\r\n\t\t\t\t\tsetGameSettings={this.setGameSettings}\r\n\t\t\t\t/>\r\n\t\t\t\t<TimeChallengeEndDialog\r\n\t\t\t\t\tisGameActive={this.state.isGameActive}\r\n\t\t\t\t\tgameEnded={this.state.gameEnded}\r\n\t\t\t\t\tgameSettings={this.state.gameSettings}\r\n\t\t\t\t\tdidPlayerWin={this.state.didPlayerWin}\r\n\t\t\t\t\tcloseGameEndDialog={this.closeGameEndDialog}\r\n\t\t\t\t/>\r\n\t\t\t\t<TimeOpenEndDialog\r\n\t\t\t\t\tisGameActive={this.state.isGameActive}\r\n\t\t\t\t\tgameEnded={this.state.gameEnded}\r\n\t\t\t\t\tgameSettings={this.state.gameSettings}\r\n\t\t\t\t\tcloseGameEndDialog={this.closeGameEndDialog}\r\n\t\t\t\t\tclockTime={this.state.clockTime}\r\n\t\t\t\t/>\r\n\t\t\t\t<ShareDialog\r\n\t\t\t\t\tisOpen={this.state.shareDialogOpen}\r\n\t\t\t\t\ttoggle={this.toggleShareDialog}\r\n\t\t\t\t\tcopy={this.copyToClipboard}\r\n\t\t\t\t\tisCopied={this.state.isCopied}\r\n\t\t\t\t/>\r\n\t\t\t\t<AboutDialog\r\n\t\t\t\t\tisOpen={this.state.aboutDialogOpen}\r\n\t\t\t\t\ttoggle={this.toggleAboutDialog}\r\n\t\t\t\t\ttoggleStaySafeDialog={this.toggleStaySafeDialog}\r\n\t\t\t\t/>\r\n\t\t\t\t<StaySafeDialog\r\n\t\t\t\t\tisOpen={this.state.staySafeDialogOpen}\r\n\t\t\t\t\ttoggle={this.toggleStaySafeDialog}\r\n\t\t\t\t/>\r\n\t\t\t\t<HowToPlayDialog\r\n\t\t\t\t\tstartGame={this.stopStartGame}\r\n\t\t\t\t\tisOpen={this.state.howToPlayDialogOpen}\r\n\t\t\t\t\ttoggle={this.toggleHowToPlayDialog}\r\n\t\t\t\t\tgameSettings={this.state.gameSettings}\r\n\t\t\t\t/>\r\n\t\t\t\t<BeatYourFriendDialog\r\n\t\t\t\t\tisOpen={this.state.beatYourFriendDialogOpen}\r\n\t\t\t\t\ttoggle={this.toggleBeatYourFriendDialog}\r\n\t\t\t\t\tgameSettings={this.state.gameSettings}\r\n\t\t\t\t/>\r\n\t\t\t\t<QuarantineButtons\r\n\t\t\t\t\tquarantineButtonsActive={this.state.quarantineButtonsActive}\r\n\t\t\t\t\tsetQuarantineInMotion={this.setQuarantineInMotion}\r\n\t\t\t\t/>\r\n\t\t\t\t<article\r\n\t\t\t\t\tid=\"canvas-container\"\r\n\t\t\t\t\tonClick={this.toggleDialog}\r\n\t\t\t\t\tonMouseMove={this.onMouseMove}\r\n\t\t\t\t\tonWheel={this.onWheelScroll}\r\n\t\t\t\t\tonContextMenu={this.onContextMenuHideQuarantine}\r\n\t\t\t\t>\r\n\t\t\t\t</article>\r\n\t\t\t\t<article\r\n\t\t\t\t\tclassName={`simulator-fadein ${this.state.simulationRestarting || this.state.gameRestarting ? \"visible\" : \"\"}`}\r\n\t\t\t\t\ttabIndex=\"-1\"\r\n\t\t\t\t\trole=\"presentation\"\r\n\t\t\t\t>\r\n\t\t\t\t</article>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\n// import logo from './logo.svg';\r\nimport HomePage from \"./HomePage/main\";\r\n\r\nimport './App.scss';\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <HomePage />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}